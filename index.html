<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forward Tipping Dumper - Digital Workbook</title>
    <meta name="description" content="Interactive Forward Tipping Dumper training workbook with modules, tests, and comprehensive learning materials">
    <meta name="theme-color" content="#004D40">
    <link rel="preconnect" href="https://cdn.tailwindcss.com">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        // Brand colors from Operator Skills Hub
                        brand: {
                            50: '#F9FAFB',    // Light gray background
                            100: '#E0F2F7',   // Light blue (active tabs)
                            200: '#E5E7EB',   // Light gray borders
                            600: '#6B7280',   // Gray text
                            700: '#4B5563',   // Dark gray text
                            800: '#1E40AF',   // Dark blue
                            900: '#004D40',   // Dark teal branding
                        },
                        primary: {
                            50: '#E0F2F7',    // Light blue
                            100: '#D1FAE5',   // Light green
                            500: '#1D4ED8',   // Main blue
                            600: '#059669',   // Green
                            700: '#1D4ED8',   // Blue
                            800: '#1E40AF',   // Dark blue
                            900: '#004D40',   // Dark teal
                        },
                        success: {
                            50: '#D1FAE5',    // Light green
                            100: '#D1FAE5',   // Light green
                            500: '#10b981',   // Green
                            600: '#059669',   // Green
                        },
                        warning: {
                            50: '#FFF7ED',    // Light orange
                            100: '#FFF7ED',   // Light orange
                            500: '#F59E0B',   // Amber
                            600: '#D97706',   // Orange
                        },
                        danger: {
                            50: '#FEF2F2',    // Light red
                            100: '#FEF2F2',   // Light red
                            500: '#ef4444',   // Red
                            600: '#DC2626',   // Red
                        },
                        purple: {
                            500: '#8B5CF6',   // Purple for completion rate
                        }
                    }
                }
            }
        }
    </script>
    <style>
        .btn { @apply px-4 py-2 rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2; }
        .btn-primary { @apply bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500; }
        .btn-secondary { @apply bg-white text-blue-600 border border-blue-600 hover:bg-blue-50 focus:ring-blue-500; }
        .btn-enter { @apply bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 px-6 py-3 rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2; }
        .card { @apply bg-white rounded-2xl shadow-lg border border-gray-200 p-6; }
        .safety-card { @apply bg-danger-50 border-l-4 border-danger-600 p-4 rounded-lg; }
        .progress-bar { @apply w-full bg-gray-200 rounded-full h-2 overflow-hidden; }
        .progress-fill { @apply h-full bg-primary-600 transition-all duration-300 ease-out; }
        .hidden { display: none !important; }
        
        /* Enhanced Design System */
        .gradient-bg {
            background: linear-gradient(135deg, #004D40 0%, #1E40AF 100%);
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .section-icon {
            width: 60px;
            height: 60px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-bottom: 16px;
        }
        .feature-card {
            background: white;
            border-radius: 24px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            transition: all 0.3s ease;
        }
        .feature-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .module-card {
            transition: all 0.3s ease;
        }
        .module-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        /* Image optimization */
        img {
            max-width: 100%;
            height: auto;
            transition: opacity 0.3s ease;
        }
        
        img[loading="lazy"] {
            opacity: 0;
        }
        
        img[loading="lazy"].loaded {
            opacity: 1;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="min-h-screen">
        <!-- Branding Bar -->
        <div class="gradient-bg text-white shadow-lg">
            <div class="px-4 py-6">
                <!-- Desktop Layout -->
                <div class="hidden md:flex items-center justify-between">
                    <div class="flex items-center space-x-4">
                        <svg class="w-10 h-10 text-white flex-shrink-0" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                        </svg>
                        <div>
                            <h1 class="text-xl font-bold">Operator Skills Hub</h1>
                            <p class="text-sm text-white/80">Professional Training Platform</p>
                        </div>
                    </div>
                    <div class="flex items-center space-x-4">
                        <div class="text-right min-w-0 flex-1">
                            <p class="text-sm font-medium text-white truncate max-w-xs" id="userEmail">student@example.com</p>
                            <p class="text-xs text-white/70">Student Portal</p>
                        </div>
                        <button onclick="logout()" class="px-5 py-3 bg-white/10 text-white border border-white/20 rounded-lg text-sm font-medium hover:bg-white/20 transition-colors flex-shrink-0">
                            Logout
                        </button>
                    </div>
                </div>

                <!-- Mobile Layout -->
                <div class="md:hidden space-y-4">
                    <!-- Top Row: Logo and Brand -->
                    <div class="flex items-center space-x-3">
                        <svg class="w-8 h-8 text-white flex-shrink-0" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                        </svg>
                        <div class="min-w-0 flex-1">
                            <h1 class="text-lg font-bold truncate">Operator Skills Hub</h1>
                            <p class="text-xs text-white/80">Professional Training Platform</p>
                        </div>
                    </div>
                    
                    <!-- Bottom Row: User Info and Logout -->
                    <div class="flex items-center justify-between">
                        <div class="min-w-0 flex-1 mr-3">
                            <p class="text-sm font-medium text-white truncate" id="userEmailMobile">student@example.com</p>
                            <p class="text-xs text-white/70">Student Portal</p>
                        </div>
                        <button onclick="logout()" class="px-4 py-2 bg-white/10 text-white border border-white/20 rounded-lg text-sm font-medium hover:bg-white/20 transition-colors flex-shrink-0">
                            Logout
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Header -->
        <header class="bg-white border-b border-brand-200">
            <div class="px-4 py-6">
                <div class="text-center">
                    <h1 class="text-2xl font-bold text-brand-900 mb-1">Forward Tipping Dumper</h1>
                    <p class="text-sm text-brand-700">Skills Bootcamp - Interactive Training Modules</p>
                    <div class="mt-2 flex flex-col sm:flex-row items-center justify-center gap-3">
                        <span class="inline-block px-3 py-1 bg-primary-100 text-primary-800 text-xs font-medium rounded-full">
                            A09 CPCS Training Standard
                        </span>
                        <button onclick="window.open('guide.html', '_blank')" class="inline-flex items-center px-4 py-2 bg-blue-50 text-blue-700 border border-blue-200 rounded-lg text-sm font-medium hover:bg-blue-100 transition-colors">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                            </svg>
                            How to Use This Guide
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Mobile Navigation -->
        <nav class="bg-white shadow-sm border-b border-brand-200 sticky top-0 z-50">
            <div class="px-4 py-3">
                <!-- Mobile Tab Navigation -->
                <div class="grid grid-cols-4 gap-1">
                    <button onclick="showTab('home')" id="home-tab" class="flex flex-col items-center space-y-1 py-3 px-2 rounded-lg font-medium text-xs bg-brand-100 text-primary-700">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                        </svg>
                        <span>Home</span>
                    </button>
                    <button onclick="showTab('modules')" id="modules-tab" class="flex flex-col items-center space-y-1 py-3 px-2 rounded-lg font-medium text-xs text-brand-600 hover:text-brand-700 hover:bg-brand-50">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
                        </svg>
                        <span>Modules</span>
                    </button>
                    <button onclick="showTab('quizzes')" id="quizzes-tab" class="flex flex-col items-center space-y-1 py-3 px-2 rounded-lg font-medium text-xs text-brand-600 hover:text-brand-700 hover:bg-brand-50">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <span>Tests</span>
                    </button>
                    <button onclick="showTab('glossary')" id="glossary-tab" class="flex flex-col items-center space-y-1 py-3 px-2 rounded-lg font-medium text-xs text-brand-600 hover:text-brand-700 hover:bg-brand-50">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                        </svg>
                        <span>Glossary</span>
                    </button>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="bg-brand-50 min-h-screen pb-20">
            <div class="px-4 py-6">
            <!-- Home Tab -->
            <div id="home-content" class="space-y-8">
                <!-- Welcome Section -->
                <div class="text-center mb-8">
                    <div class="section-icon bg-blue-100 text-blue-600 mx-auto">
                        ⛑️
                    </div>
                    <h2 class="text-3xl font-bold text-gray-900 mb-4">Forward Tipping Dumper Training</h2>
                    <p class="text-lg text-gray-600 max-w-3xl mx-auto">
                        Master Forward Tipping Dumper operations through interactive modules, 
                        comprehensive assessments, and hands-on learning.
                    </p>
                </div>

                <!-- Quick Actions -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="feature-card p-6 text-center">
                        <div class="section-icon bg-green-100 text-green-600 mx-auto mb-4">
                            📖
                        </div>
                        <h3 class="text-xl font-semibold text-gray-900 mb-2">Learning Modules</h3>
                        <p class="text-gray-600 mb-4">6 comprehensive modules covering all aspects of FTD operation</p>
                        <button onclick="showTab('modules')" class="btn btn-primary w-full">View Modules</button>
                    </div>
                    
                    <div class="feature-card p-6 text-center">
                        <div class="section-icon bg-purple-100 text-purple-600 mx-auto mb-4">
                            🧠
                        </div>
                        <h3 class="text-xl font-semibold text-gray-900 mb-2">Knowledge Tests</h3>
                        <p class="text-gray-600 mb-4">Test your understanding with interactive assessments</p>
                        <button onclick="showTab('quizzes')" class="btn btn-primary w-full">Take Tests</button>
                    </div>
                    
                    <div class="feature-card p-6 text-center">
                        <div class="section-icon bg-indigo-100 text-indigo-600 mx-auto mb-4">
                            📚
                        </div>
                        <h3 class="text-xl font-semibold text-gray-900 mb-2">Glossary</h3>
                        <p class="text-gray-600 mb-4">Searchable terms and definitions for FTD operations</p>
                        <button onclick="showTab('glossary')" class="btn btn-primary w-full">View Glossary</button>
                    </div>
                </div>

                <!-- Safety Reminder -->
                <div class="safety-card">
                    <div class="flex items-center space-x-3">
                        <svg class="w-6 h-6 text-danger-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                        </svg>
                        <h3 class="text-lg font-semibold text-danger-800">OperateSAFE</h3>
                    </div>
                    <p class="mt-2 text-danger-700">
                        Always put safety first and STOP any activity that could lead to harm to yourself or others.
                    </p>
                </div>
            </div>

            <!-- Modules Tab -->
            <div id="modules-content" class="space-y-6 hidden">
                <div class="mb-6">
                    <div class="text-center mb-6">
                        <div class="section-icon bg-green-100 text-green-600 mx-auto">
                            📖
                        </div>
                        <h2 class="text-2xl font-bold text-brand-900 mb-2">FTD Training Modules</h2>
                        <p class="text-brand-700 text-sm">Interactive learning modules for Forward Tipping Dumper operations</p>
                    </div>
                    <div class="relative mb-4">
                        <input type="text" placeholder="🔍 Search modules..." class="w-full pl-10 pr-4 py-3 border border-brand-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-base">
                        <svg class="absolute left-3 top-1/2 transform -translate-y-1/2 text-brand-400 w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                        </svg>
                    </div>
                    <div class="flex space-x-2">
                        <button class="px-4 py-2 bg-primary-700 text-white rounded-lg text-sm font-medium">
                            All Modules
                        </button>
                        <button class="px-4 py-2 bg-brand-50 text-brand-700 border border-brand-200 rounded-lg text-sm font-medium">
                            In Glossary
                        </button>
                        <button class="px-4 py-2 bg-brand-50 text-brand-700 border border-brand-200 rounded-lg text-sm font-medium">
                            Completed
                        </button>
                    </div>
                </div>
                
                <div class="space-y-4">
                    <!-- Module 1: Introduction to FTD -->
                    <div class="card module-card" data-module="1">
                        <div class="mb-4">
                            <div class="flex items-center justify-between mb-3">
                                <h3 class="text-lg font-semibold text-brand-900">Module 1: Introduction & Safe Working Practices</h3>
                                <span class="px-3 py-1 bg-success-100 text-success-600 text-xs rounded-full font-medium">Completed</span>
                            </div>
                            <div class="flex flex-wrap gap-2 mb-3">
                                <span class="px-2 py-1 bg-success-100 text-success-600 text-xs rounded-full">Essential</span>
                                <span class="px-2 py-1 bg-primary-100 text-primary-800 text-xs rounded-full">Foundation</span>
                            </div>
                        </div>
                        
                        <p class="text-brand-700 mb-4 text-sm leading-relaxed">
                            Learn about Forward Tipping Dumpers, their purpose, types, and basic operation principles. Understand the machine components and safety features.
                        </p>
                        
                        
                        <div class="w-full">
                            <button class="btn-enter w-full" onclick="viewModule(1)">
                                Enter
                            </button>
                        </div>
                    </div>

                    <!-- Module 2: Health & Safety Legislation -->
                    <div class="card module-card" data-module="2">
                        <div class="mb-4">
                            <div class="flex items-center justify-between mb-3">
                                <h3 class="text-lg font-semibold text-brand-900">Module 2: Health & Safety Legislation</h3>
                                <span class="px-3 py-1 bg-success-100 text-success-600 text-xs rounded-full font-medium">Completed</span>
                            </div>
                            <div class="flex flex-wrap gap-2 mb-3">
                                <span class="px-2 py-1 bg-danger-100 text-danger-600 text-xs rounded-full">Critical</span>
                                <span class="px-2 py-1 bg-primary-100 text-primary-800 text-xs rounded-full">Legal</span>
                            </div>
                        </div>
                        
                        <p class="text-brand-700 mb-4 text-sm leading-relaxed">
                            Understand your legal responsibilities under the Health and Safety at Work Act 1974, PUWER regulations, and other relevant legislation.
                        </p>
                        
                        
                        <div class="w-full">
                            <button class="btn-enter w-full" onclick="viewModule(2)">
                                Enter
                            </button>
                        </div>
                    </div>

                    <!-- Module 3: Pre-Operational Checks -->
                    <div class="card module-card" data-module="3">
                        <div class="mb-4">
                            <div class="flex items-center justify-between mb-3">
                                <h3 class="text-lg font-semibold text-brand-900">Module 3: Operator Roles & Machine Components</h3>
                                <span class="px-3 py-1 bg-warning-100 text-warning-600 text-xs rounded-full font-medium">In Glossary</span>
                            </div>
                            <div class="flex flex-wrap gap-2 mb-3">
                                <span class="px-2 py-1 bg-danger-100 text-danger-600 text-xs rounded-full">Critical</span>
                                <span class="px-2 py-1 bg-primary-100 text-primary-800 text-xs rounded-full">Safety</span>
                            </div>
                        </div>
                        
                        <p class="text-brand-700 mb-4 text-sm leading-relaxed">
                            Master the essential pre-operational checks including visual inspections, fluid levels, safety systems, and documentation requirements.
                        </p>
                        
                        
                        <div class="w-full">
                            <button class="btn-enter w-full" onclick="viewModule(3)">
                                Enter
                            </button>
                        </div>
                    </div>

                    <!-- Module 4: Machine Operation -->
                    <div class="card module-card" data-module="4">
                        <div class="mb-4">
                            <div class="flex items-center justify-between mb-3">
                                <h3 class="text-lg font-semibold text-brand-900">Module 4: Machine Operation</h3>
                                <span class="px-3 py-1 bg-warning-100 text-warning-600 text-xs rounded-full font-medium">Not Started</span>
                            </div>
                            <div class="flex flex-wrap gap-2 mb-3">
                                <span class="px-2 py-1 bg-primary-100 text-primary-800 text-xs rounded-full">Practical</span>
                                <span class="px-2 py-1 bg-warning-100 text-warning-600 text-xs rounded-full">Advanced</span>
                            </div>
                        </div>
                        
                        <p class="text-brand-700 mb-4 text-sm leading-relaxed">
                            Learn safe operating procedures, load handling, maneuvering techniques, and emergency procedures for Forward Tipping Dumpers.
                        </p>
                        
                        
                        <div class="w-full">
                            <button class="btn-enter w-full" onclick="viewModule(4)">
                                Enter
                            </button>
                        </div>
                    </div>

                    <!-- Module 5: Environmental Considerations -->
                    <div class="card module-card" data-module="5">
                        <div class="mb-4">
                            <div class="flex items-center justify-between mb-3">
                                <h3 class="text-lg font-semibold text-brand-900">Module 5: Material Handling</h3>
                                <span class="px-3 py-1 bg-warning-100 text-warning-600 text-xs rounded-full font-medium">Not Started</span>
                            </div>
                            <div class="flex flex-wrap gap-2 mb-3">
                                <span class="px-2 py-1 bg-success-100 text-success-600 text-xs rounded-full">Environmental</span>
                                <span class="px-2 py-1 bg-primary-100 text-primary-800 text-xs rounded-full">Compliance</span>
                            </div>
                        </div>
                        
                        <p class="text-brand-700 mb-4 text-sm leading-relaxed">
                            Understand environmental impact, spill prevention, noise control, and sustainable operating practices for FTD operations.
                        </p>
                        
                        
                        <div class="w-full">
                            <button class="btn-enter w-full" onclick="viewModule(5)">
                                Enter
                            </button>
                        </div>
                    </div>

                    <!-- Module 6: Assessment & Certification -->
                    <div class="card module-card" data-module="6">
                        <div class="mb-4">
                            <div class="flex items-center justify-between mb-3">
                                <h3 class="text-lg font-semibold text-brand-900">Module 6: Transportation & Assessment</h3>
                                <span class="px-3 py-1 bg-warning-100 text-warning-600 text-xs rounded-full font-medium">Locked</span>
                            </div>
                            <div class="flex flex-wrap gap-2 mb-3">
                                <span class="px-2 py-1 bg-purple-100 text-purple-600 text-xs rounded-full">Final</span>
                                <span class="px-2 py-1 bg-primary-100 text-primary-800 text-xs rounded-full">Assessment</span>
                            </div>
                        </div>
                        
                        <p class="text-brand-700 mb-4 text-sm leading-relaxed">
                            Complete the final assessment, practical evaluation, and obtain your CPCS A09 Forward Tipping Dumper certification.
                        </p>
                        
                        
                        <div class="w-full">
                            <button class="btn-enter w-full" onclick="viewModule(6)">
                                Enter
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tests Tab -->
            <div id="quizzes-content" class="space-y-8 hidden">
                <div class="text-center mb-8">
                    <div class="section-icon bg-purple-100 text-purple-600 mx-auto">
                        🧠
                    </div>
                    <h2 class="text-2xl font-bold text-brand-900 mb-2">Knowledge Stops & Tests</h2>
                    <p class="text-brand-700 text-sm">Test your understanding with interactive assessments</p>
                    <div class="flex space-x-3 justify-center mt-4">
                        <button class="btn btn-primary" onclick="startNewTest()">Start New Test</button>
                        <button class="btn btn-secondary" onclick="viewTestResults()">View Results</button>
                    </div>
                </div>
                
                <!-- FTD Test Modules -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="feature-card p-6">
                        <div class="flex items-center space-x-3 mb-4">
                            <div class="w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center">
                                <svg class="w-6 h-6 text-primary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                                </svg>
                            </div>
                            <div>
                                <h3 class="text-lg font-semibold text-brand-900">Module 1 Test</h3>
                                <p class="text-sm text-brand-600">Introduction to FTD</p>
                            </div>
                        </div>
                        <div class="space-y-3">
                            <div class="flex justify-between text-sm">
                                <span class="text-brand-600">Questions</span>
                                <span class="font-semibold">5</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span class="text-brand-600">Time Limit</span>
                                <span class="font-semibold">20 min</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span class="text-brand-600">Pass Rate</span>
                                <span class="font-semibold">80%</span>
                            </div>
                        </div>
                        <div class="mt-4 flex space-x-2">
                            <button class="btn btn-primary flex-1" onclick="startModuleTest(1)">Start Test</button>
                            <button class="btn btn-secondary" onclick="previewModuleTest(1)">Preview</button>
                        </div>
                    </div>
                    
                    <div class="feature-card p-6">
                        <div class="flex items-center space-x-3 mb-4">
                            <div class="w-12 h-12 bg-success-100 rounded-lg flex items-center justify-center">
                                <svg class="w-6 h-6 text-success-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                            </div>
                            <div>
                                <h3 class="text-lg font-semibold text-brand-900">Module 2 Test</h3>
                                <p class="text-sm text-brand-600">Health & Safety</p>
                            </div>
                        </div>
                        <div class="space-y-3">
                            <div class="flex justify-between text-sm">
                                <span class="text-brand-600">Questions</span>
                                <span class="font-semibold">5</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span class="text-brand-600">Time Limit</span>
                                <span class="font-semibold">25 min</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span class="text-brand-600">Pass Rate</span>
                                <span class="font-semibold">80%</span>
                            </div>
                        </div>
                        <div class="mt-4 flex space-x-2">
                            <button class="btn btn-success flex-1" onclick="startModuleTest(2)">Start Test</button>
                            <button class="btn btn-secondary" onclick="previewModuleTest(2)">Preview</button>
                        </div>
                    </div>
                    
                    <div class="feature-card p-6">
                        <div class="flex items-center space-x-3 mb-4">
                            <div class="w-12 h-12 bg-warning-100 rounded-lg flex items-center justify-center">
                                <svg class="w-6 h-6 text-warning-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z" />
                                </svg>
                            </div>
                            <div>
                                <h3 class="text-lg font-semibold text-brand-900">Module 3 Test</h3>
                                <p class="text-sm text-brand-600">Pre-Operational Checks</p>
                            </div>
                        </div>
                        <div class="space-y-3">
                            <div class="flex justify-between text-sm">
                                <span class="text-brand-600">Questions</span>
                                <span class="font-semibold">5</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span class="text-brand-600">Time Limit</span>
                                <span class="font-semibold">30 min</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span class="text-brand-600">Pass Rate</span>
                                <span class="font-semibold">80%</span>
                            </div>
                        </div>
                        <div class="mt-4 flex space-x-2">
                            <button class="btn btn-warning flex-1" onclick="startModuleTest(3)">Start Test</button>
                            <button class="btn btn-secondary" onclick="previewModuleTest(3)">Preview</button>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Glossary Tab -->
            <div id="glossary-content" class="space-y-8 hidden">
                <div class="text-center mb-8">
                    <div class="section-icon bg-indigo-100 text-indigo-600 mx-auto">
                        📖
                    </div>
                    <h2 class="text-2xl font-bold text-brand-900 mb-2">FTD Glossary of Terms</h2>
                    <p class="text-brand-700 text-sm">Comprehensive glossary of terms and definitions used throughout the Forward Tipping Dumper training course</p>
                    <div class="bg-white p-4 rounded-lg mt-4 max-w-md mx-auto">
                        <input type="text" id="glossarySearch" placeholder="Search glossary terms..." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                </div>

                <div id="glossaryTerms" class="grid gap-4">
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Access</h3>
                        <p class="text-brand-700">To be able to get to a place.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Actuating</h3>
                        <p class="text-brand-700">Cause (a machine or device) to operate.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Articulated</h3>
                        <p class="text-brand-700">Having two or more sections connected by a flexible joint.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Backfilling</h3>
                        <p class="text-brand-700">The process of filling in excavated areas with transported material.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Banksman</h3>
                        <p class="text-brand-700">A person who guides the machine operator during movement, especially in confined spaces and when reversing.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Beacon</h3>
                        <p class="text-brand-700">A flashing safety light mounted on the ROPS/top of cab to alert others when the machine is in operation.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Blind Spots</h3>
                        <p class="text-brand-700">Areas around the dumper not visible to the operator, requiring caution.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Boom</h3>
                        <p class="text-brand-700">The main arm attached to a 360's body that supports the dipper and bucket.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Brake Test</h3>
                        <p class="text-brand-700">A routine check to ensure the dumper's braking system is functioning correctly and safely before operation, typically performed at the start of a shift.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Bucket</h3>
                        <p class="text-brand-700">The attachment on a 360 used for digging, grading, trenching or loading duties.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Cabbed Dumper</h3>
                        <p class="text-brand-700">Dumper fitted with an enclosed operator cab, providing protection from weather and site conditions.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Cab / Operator's Cab</h3>
                        <p class="text-brand-700">The compartment where the operator sits to control the machine, often equipped with joysticks and pedals.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Centre of Gravity</h3>
                        <p class="text-brand-700">Balance point of a load.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Chassis</h3>
                        <p class="text-brand-700">The main framework of the machine to which all components are mounted.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Check Valves</h3>
                        <p class="text-brand-700">Valve monitoring pressure of the system.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Collapse</h3>
                        <p class="text-brand-700">The sudden failure of the sides or walls of an excavation, causing soil or materials to cave in.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Consequences</h3>
                        <p class="text-brand-700">The effect, result, or outcome of something occurring earlier.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Contour</h3>
                        <p class="text-brand-700">To change the shape of a surface, making some parts higher and some parts lower.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Counterbalance</h3>
                        <p class="text-brand-700">A weight that balances another weight.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Crush Zone</h3>
                        <p class="text-brand-700">An area where a person could be crushed between moving parts of machinery or between a moving part and a stationary object.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Cut and Fill</h3>
                        <p class="text-brand-700">A process involving the removal (cut) and redistribution (fill) of earth to level ground.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Deadman</h3>
                        <p class="text-brand-700">The Deadman lever is a safety control mechanism on a machine that must be placed in the isolated (neutral or safe) position to disable machine movement before anyone approaches the machine.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Differential Lock</h3>
                        <p class="text-brand-700">A feature that locks the drive axles for better traction on slippery or uneven terrain.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Discharging</h3>
                        <p class="text-brand-700">The process of unloading material from the skip.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Edge Protection</h3>
                        <p class="text-brand-700">A safety system or stop block installed at the edge of elevated work areas to prevent people, materials, or equipment from falling.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Egress</h3>
                        <p class="text-brand-700">To be able to leave a place.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Exclusion Zone</h3>
                        <p class="text-brand-700">A designated area where access is restricted due to potential hazards, such as heavy machinery, or dangerous operations.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Expansion Tank</h3>
                        <p class="text-brand-700">Prevents the system from becoming over-pressurised as the coolant heats up and expands.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">F.O.P.S.</h3>
                        <p class="text-brand-700">Falling Object Protective Structure - a safety feature built into the cab or canopy of the machine designed to protect the operator from falling objects, such as rocks, debris, or materials from above.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Forward Tipping Dumper</h3>
                        <p class="text-brand-700">A construction machine designed to carry and unload loose material by tipping its skip forward over the front wheels.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Front Axle</h3>
                        <p class="text-brand-700">Supports the front wheels, often provides steering capability, and transmits drive power depending on the dumper's drivetrain.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">GPS</h3>
                        <p class="text-brand-700">Helps ensure precise digging by providing real-time location data, allowing operators to excavate to the correct depth and dimensions without manual measuring.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Gradients</h3>
                        <p class="text-brand-700">Slopes.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Human Form Recognition (HFR)</h3>
                        <p class="text-brand-700">Technology used to detect the presence of people around the machine.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Hydraulics</h3>
                        <p class="text-brand-700">The system of pressurised fluid used to power and control the movement of the machine's key components.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Hydraulic Rams</h3>
                        <p class="text-brand-700">Cylinders that lift the skip to tip and discharge material.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Inclines</h3>
                        <p class="text-brand-700">Slopes, gradient.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Isolation Procedure</h3>
                        <p class="text-brand-700">Locking out the machine to prevent accidental start-up during maintenance or inspection.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Laden Skip</h3>
                        <p class="text-brand-700">The dumper's skip when it is fully loaded with material ready for transport or unloading.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Load Capacity</h3>
                        <p class="text-brand-700">The maximum weight of material the dumper is designed and rated to carry safely in its dump body.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Loading</h3>
                        <p class="text-brand-700">Filling the skip with soil, rubble, or other materials, usually by a loader or excavator.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Loading Area/Zone</h3>
                        <p class="text-brand-700">The designated area where excavators or loaders load material into the FTD.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Load Integrity</h3>
                        <p class="text-brand-700">The condition in which a load remains stable, secure, and contained during transport, ensuring it does not shift, spill, or exceed the limits of the vehicle.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Load Limits</h3>
                        <p class="text-brand-700">Maintaining balance when tipping, especially on slopes or uneven ground.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Load Security</h3>
                        <p class="text-brand-700">Ensuring that material is safely contained within the body and not overloaded.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Hauling</h3>
                        <p class="text-brand-700">Transporting material (e.g., soil, aggregates, spoil) from a loading area to a tipping area.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Manoeuvre</h3>
                        <p class="text-brand-700">To move or control the machine. This involves adjusting the machine's direction, speed, or position for tasks.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Material Handling</h3>
                        <p class="text-brand-700">Moving bulk materials, like soil, gravel, or sand, from one place to another.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Muck Shifting</h3>
                        <p class="text-brand-700">The process of moving large volumes of earth or spoil from one area of a site to another.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Oscillating</h3>
                        <p class="text-brand-700">To move repeatedly from side to side or up and down between two points.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Overloaded</h3>
                        <p class="text-brand-700">The machine carries more weight than its maximum safe payload, risking damage and unsafe operation.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">People, Plant Interface</h3>
                        <p class="text-brand-700">The interaction between workers (people) and machinery (plant).</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Pressurised</h3>
                        <p class="text-brand-700">If a container, etc. is pressurised, the air pressure inside it is higher than the air pressure outside it.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Rear Axle</h3>
                        <p class="text-brand-700">Located at the back of the vehicle, the rear axle supports the rear wheels, carries part of the load's weight, and provides drive power to help propel the dumper across the site.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Red Zone</h3>
                        <p class="text-brand-700">Area around the machine that is high-risk.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Restraining Systems</h3>
                        <p class="text-brand-700">Seat belt.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Reversing Alarm</h3>
                        <p class="text-brand-700">A loud alert sound to warn others when the machine is reversing.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Risk Assessment</h3>
                        <p class="text-brand-700">The process of identifying hazards in the workplace.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">R.O.P.S.</h3>
                        <p class="text-brand-700">Rollover Protective Structure – a safety feature in cabs to protect the operator in case of a rollover.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Rotating Seat Dumper</h3>
                        <p class="text-brand-700">A type of forward tipping dumper where the operator's seat and controls can rotate.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Safety Critical</h3>
                        <p class="text-brand-700">Actions with the machine can have significant health & safety consequences.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Safety Strut / Prop</h3>
                        <p class="text-brand-700">A strong rod, usually made from metal that helps support raised components (i.e. skip/ booms).</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Skip/ Bucket</h3>
                        <p class="text-brand-700">The container that holds the load; tips forward to discharge material.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Shoring</h3>
                        <p class="text-brand-700">To make a trench stronger by supporting it.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Slew / Slewing</h3>
                        <p class="text-brand-700">The rotation of the upper structure (cab and boom) of an excavator on its undercarriage.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Spoil</h3>
                        <p class="text-brand-700">Waste material such as soil or rubble excavated from the ground and transported by FTD.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Spoil Removal</h3>
                        <p class="text-brand-700">Removing excavated material (soil, rocks, etc.) from the site.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Straight Skip Dumper</h3>
                        <p class="text-brand-700">Type of forward tipping dumper with a fixed, non-rotating skip that tips forward to unload material directly in front of the vehicle.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Stockpiling</h3>
                        <p class="text-brand-700">Depositing material in designated piles for later use or removal.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Stop Blocks</h3>
                        <p class="text-brand-700">Concrete barriers or blocks used to prevent vehicle access.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Sub-base</h3>
                        <p class="text-brand-700">A layer of material placed on top of the ground to provide a stable foundation.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Swing Radius</h3>
                        <p class="text-brand-700">The area around an excavator that the upper structure can reach when rotating.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Swivel Skip Dumper</h3>
                        <p class="text-brand-700">A forward tipping dumper with a skip that can rotate, allowing the operator to tip material to the side for easier unloading in tight or uneven spaces.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Telematics</h3>
                        <p class="text-brand-700">Remote monitoring systems used for tracking machine performance, location, and maintenance needs.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Terrain</h3>
                        <p class="text-brand-700">The physical characteristics and surface conditions of the ground, including its slope, texture, hardness, and obstacles, which affect how machinery and workers move and operate.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Tipping</h3>
                        <p class="text-brand-700">Unloading material by tipping the skip forward over the front wheels.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Tipping Area/Zone</h3>
                        <p class="text-brand-700">The area where the dump body is raised to unload material.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Tipping Stability</h3>
                        <p class="text-brand-700">The safe practice of tipping only on level, compacted ground to avoid overturning.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Towing</h3>
                        <p class="text-brand-700">The act of pulling or hauling another vehicle, trailer, or equipment using the dumper, usually by attaching a tow bar or hitch.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Traction</h3>
                        <p class="text-brand-700">Grip.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Traffic Management Plan</h3>
                        <p class="text-brand-700">A site-specific layout that controls plant movement to prevent collisions.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Transmission</h3>
                        <p class="text-brand-700">The system that transfers engine power to the wheels.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Trenches</h3>
                        <p class="text-brand-700">Narrow, deep excavations made in the ground, typically used for laying pipes, cables, drainage systems, or foundations.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Undercarriage</h3>
                        <p class="text-brand-700">Includes the wheels, axles, suspension, frame, and related components that support the machine, provide stability, and enable it to move and carry loads safely across site.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Unladen Skip</h3>
                        <p class="text-brand-700">The dumper's skip when it is empty and not carrying any load.</p>
                    </div>
                    <div class="feature-card p-6">
                        <h3 class="font-semibold text-brand-900 mb-2">Visibility Aids</h3>
                        <p class="text-brand-700">Mirrors, cameras, or alarms to assist the operator's awareness of surroundings.</p>
                    </div>
                </div>
            </div>
                    </div>
                </div>

                <!-- Glossary Terms -->
                                <div id="glossary-terms" class="grid gap-4">
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Access</h3>
                        <p class="text-brand-700">To be able to get to a place.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Actuating</h3>
                        <p class="text-brand-700">Cause (a machine or device) to operate.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Articulated</h3>
                        <p class="text-brand-700">Having two or more sections connected by a flexible joint.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Backfilling</h3>
                        <p class="text-brand-700">The process of filling in excavated areas with transported material.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Banksman</h3>
                        <p class="text-brand-700">A person who guides the machine operator during movement, especially in confined spaces and when reversing.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Beacon</h3>
                        <p class="text-brand-700">A flashing safety light mounted on the ROPS/top of cab to alert others when the machine is in operation.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Blind Spots</h3>
                        <p class="text-brand-700">Areas around the dumper not visible to the operator, requiring caution.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Boom</h3>
                        <p class="text-brand-700">The main arm attached to a 360's body that supports the dipper and bucket.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Brake Test</h3>
                        <p class="text-brand-700">A routine check to ensure the dumper's braking system is functioning correctly and safely before operation.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Bucket</h3>
                        <p class="text-brand-700">The attachment on a 360 used for digging, grading, trenching or loading duties.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Cabbed Dumper</h3>
                        <p class="text-brand-700">Dumper fitted with an enclosed operator cab, providing protection from weather and site conditions.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Cab / Operator's Cab</h3>
                        <p class="text-brand-700">The compartment where the operator sits to control the machine, often equipped with joysticks and pedals.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Centre of Gravity</h3>
                        <p class="text-brand-700">Balance point of a load.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Chassis</h3>
                        <p class="text-brand-700">The main framework of the machine to which all components are mounted.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Check Valves</h3>
                        <p class="text-brand-700">Valve monitoring pressure of the system.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Collapse</h3>
                        <p class="text-brand-700">The sudden failure of the sides or walls of an excavation, causing soil or materials to cave in.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Consequences</h3>
                        <p class="text-brand-700">The effect, result, or outcome of something occurring earlier.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Contour</h3>
                        <p class="text-brand-700">To change the shape of a surface, making some parts higher and some parts lower.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Counterbalance</h3>
                        <p class="text-brand-700">A weight that balances another weight.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Crush Zone</h3>
                        <p class="text-brand-700">An area where a person could be crushed between moving parts of machinery or between a moving part and a stationary object.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Cut and Fill</h3>
                        <p class="text-brand-700">A process involving the removal (cut) and redistribution (fill) of earth to level ground.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Deadman</h3>
                        <p class="text-brand-700">The Deadman lever is a safety control mechanism on a machine that must be placed in the isolated (neutral or safe) position to disable machine movement before anyone approaches the machine.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Differential Lock</h3>
                        <p class="text-brand-700">A feature that locks the drive axles for better traction on slippery or uneven terrain.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Discharging</h3>
                        <p class="text-brand-700">The process of unloading material from the skip.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Edge Protection</h3>
                        <p class="text-brand-700">A safety system or stop block installed at the edge of elevated work areas to prevent people, materials, or equipment from falling.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Egress</h3>
                        <p class="text-brand-700">To be able to leave a place.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Exclusion Zone</h3>
                        <p class="text-brand-700">A designated area where access is restricted due to potential hazards, such as heavy machinery, or dangerous operations.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Expansion Tank</h3>
                        <p class="text-brand-700">Prevents the system from becoming over-pressurised as the coolant heats up and expands.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">F.O.P.S.</h3>
                        <p class="text-brand-700">Falling Object Protective Structure - a safety feature built into the cab or canopy of the machine designed to protect the operator from falling objects.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Front Axle</h3>
                        <p class="text-brand-700">Supports the front wheels, often provides steering capability, and transmits drive power depending on the dumper's drivetrain.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">GPS</h3>
                        <p class="text-brand-700">Helps ensure precise digging by providing real-time location data, allowing operators to excavate to the correct depth and dimensions.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Gradients</h3>
                        <p class="text-brand-700">Slopes.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Human Form Recognition (HFR)</h3>
                        <p class="text-brand-700">Technology used to detect the presence of people around the machine.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Hydraulics</h3>
                        <p class="text-brand-700">The system of pressurised fluid used to power and control the movement of the machine's key components.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Hydraulic Rams</h3>
                        <p class="text-brand-700">Cylinders that lift the skip to tip and discharge material.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Inclines</h3>
                        <p class="text-brand-700">Slopes, gradient.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Isolation Procedure</h3>
                        <p class="text-brand-700">Locking out the machine to prevent accidental start-up during maintenance or inspection.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Laden Skip</h3>
                        <p class="text-brand-700">The dumper's skip when it is fully loaded with material ready for transport or unloading.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Load Capacity</h3>
                        <p class="text-brand-700">The maximum weight of material the dumper is designed and rated to carry safely in its dump body.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Loading</h3>
                        <p class="text-brand-700">Filling the skip with soil, rubble, or other materials, usually by a loader or excavator.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Loading Area/Zone</h3>
                        <p class="text-brand-700">The designated area where excavators or loaders load material into the FTD.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Load Integrity</h3>
                        <p class="text-brand-700">The condition in which a load remains stable, secure, and contained during transport, ensuring it does not shift, spill, or exceed the limits of the vehicle.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Load Limits</h3>
                        <p class="text-brand-700">Maintaining balance when tipping, especially on slopes or uneven ground.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Load Security</h3>
                        <p class="text-brand-700">Ensuring that material is safely contained within the body and not overloaded.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">MAM</h3>
                        <p class="text-brand-700">Maximum Authorised Mass - the maximum weight a vehicle is legally allowed to carry.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Manoeuvre</h3>
                        <p class="text-brand-700">To move or control the machine. This involves adjusting the machine's direction, speed, or position for tasks.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Material Handling</h3>
                        <p class="text-brand-700">Moving bulk materials, like soil, gravel, or sand, from one place to another.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Muck Shifting</h3>
                        <p class="text-brand-700">The process of moving large volumes of earth or spoil from one area of a site to another.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Oscillating</h3>
                        <p class="text-brand-700">To move repeatedly from side to side or up and down between two points.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Overloaded</h3>
                        <p class="text-brand-700">The machine carries more weight than its maximum safe payload, risking damage and unsafe operation.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">People, Plant Interface</h3>
                        <p class="text-brand-700">The interaction between workers (people) and machinery (plant).</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Pressurised</h3>
                        <p class="text-brand-700">If a container, etc. is pressurised, the air pressure inside it is higher than the air pressure outside it.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Rear Axle</h3>
                        <p class="text-brand-700">Located at the back of the vehicle, the rear axle supports the rear wheels, carries part of the load's weight, and provides drive power.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Red Zone</h3>
                        <p class="text-brand-700">Area around the machine that is high-risk.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Restraining Systems</h3>
                        <p class="text-brand-700">Seat belt.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Reversing Alarm</h3>
                        <p class="text-brand-700">A loud alert sound to warn others when the machine is reversing.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Risk Assessment</h3>
                        <p class="text-brand-700">The process of identifying hazards in the workplace.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">R.O.P.S.</h3>
                        <p class="text-brand-700">Rollover Protective Structure – a safety feature in cabs to protect the operator in case of a rollover.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Rotating Seat Dumper</h3>
                        <p class="text-brand-700">A type of forward tipping dumper where the operator's seat and controls can rotate.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Safety Critical</h3>
                        <p class="text-brand-700">Actions with the machine can have significant health & safety consequences.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Skip/ Bucket</h3>
                        <p class="text-brand-700">The container that holds the load; tips forward to discharge material.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Shoring</h3>
                        <p class="text-brand-700">To make a trench stronger by supporting it.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Slew / Slewing</h3>
                        <p class="text-brand-700">The rotation of the upper structure (cab and boom) of an excavator on its undercarriage.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Spoil</h3>
                        <p class="text-brand-700">Waste material such as soil or rubble excavated from the ground and transported by FTD.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Spoil Removal</h3>
                        <p class="text-brand-700">Removing excavated material (soil, rocks, etc.) from the site.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Straight Skip Dumper</h3>
                        <p class="text-brand-700">Type of forward tipping dumper with a fixed, non-rotating skip that tips forward to unload material directly in front of the vehicle.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Stockpiling</h3>
                        <p class="text-brand-700">Depositing material in designated piles for later use or removal.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Stop Blocks</h3>
                        <p class="text-brand-700">Concrete barriers or blocks used to prevent vehicle access.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Sub-base</h3>
                        <p class="text-brand-700">A layer of material placed on top of the ground to provide a stable foundation.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Swing Radius</h3>
                        <p class="text-brand-700">The area around an excavator that the upper structure can reach when rotating.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Swivel Skip Dumper</h3>
                        <p class="text-brand-700">A forward tipping dumper with a skip that can rotate, allowing the operator to tip material to the side for easier unloading.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Telematics</h3>
                        <p class="text-brand-700">Remote monitoring systems used for tracking machine performance, location, and maintenance needs.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Tipping</h3>
                        <p class="text-brand-700">Unloading material by tipping the skip forward over the front wheels.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Tipping Area/Zone</h3>
                        <p class="text-brand-700">The area where the dump body is raised to unload material.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Tipping Stability</h3>
                        <p class="text-brand-700">The safe practice of tipping only on level, compacted ground to avoid overturning.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Towing</h3>
                        <p class="text-brand-700">The act of pulling or hauling another vehicle, trailer, or equipment using the dumper.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Terrain</h3>
                        <p class="text-brand-700">The physical characteristics and surface conditions of the ground, including its slope, texture, hardness, and obstacles.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Traction</h3>
                        <p class="text-brand-700">Grip.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Traffic Management Plan</h3>
                        <p class="text-brand-700">A site-specific layout that controls plant movement to prevent collisions.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Transmission</h3>
                        <p class="text-brand-700">The system that transfers engine power to the wheels.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Trenches</h3>
                        <p class="text-brand-700">Narrow, deep excavations made in the ground, typically used for laying pipes, cables, drainage systems, or foundations.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Undercarriage</h3>
                        <p class="text-brand-700">Includes the wheels, axles, suspension, frame, and related components that support the machine and enable it to move safely.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Unladen Skip</h3>
                        <p class="text-brand-700">The dumper's skip when it is empty and not carrying any load.</p>
                    </div>
                    
                    <div class="card">
                        <h3 class="font-semibold text-brand-900 mb-2">Visibility Aids</h3>
                        <p class="text-brand-700">Mirrors, cameras, or alarms to assist the operator's awareness of surroundings.</p>
                    </div>
                </div></div>



                </div>
            </div>
        </main>
    </div>

        <!-- Module Modal -->
        <div id="moduleModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
            <div class="flex items-center justify-center min-h-screen p-4">
                <div class="bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden">
                    <div class="flex items-center justify-between p-6 border-b border-gray-200">
                        <h2 id="moduleTitle" class="text-xl font-semibold text-gray-900">Module Content</h2>
                        <button onclick="closeModule()" class="text-gray-400 hover:text-gray-600">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>
                    <div class="p-6 overflow-y-auto max-h-[calc(90vh-120px)]">
                        <div id="moduleContent" class="prose max-w-none">
                            <!-- Module content will be inserted here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Test Modal -->
        <div id="testModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
            <div class="flex items-center justify-center min-h-screen p-4">
                <div class="bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden">
                    <div class="flex items-center justify-between p-6 border-b border-gray-200">
                        <div>
                            <h2 id="testTitle" class="text-xl font-semibold text-gray-900">Module Test</h2>
                            <p id="testGlossary" class="text-sm text-gray-600">Question 1 of 15</p>
                        </div>
                        <div class="flex items-center space-x-4">
                            <div id="testTimer" class="text-sm font-medium text-gray-600">20:00</div>
                            <button onclick="closeTest()" class="text-gray-400 hover:text-gray-600">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="p-6 overflow-y-auto max-h-[calc(90vh-120px)]">
                        <div id="testContent">
                            <!-- Test content will be inserted here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

    <script>
        // Simple state management
        let progress = {
            modulesCompleted: 2,
            quizzesCompleted: 0,
            timeSpent: 150, // minutes
            moduleStatus: { 
                1: 'completed', 
                2: 'completed', 
                3: 'in-progress', 
                4: 'not-started', 
                5: 'not-started', 
                6: 'locked' 
            }
        };

        // Authentication check
        function checkAuthentication() {
            try {
                // Check if we're in a redirect loop
                if (sessionStorage.getItem('authCheckCount')) {
                    const count = parseInt(sessionStorage.getItem('authCheckCount'));
                    if (count > 3) {
                        console.error('Too many auth checks, stopping redirect loop');
                        sessionStorage.removeItem('authCheckCount');
                        return false;
                    }
                    sessionStorage.setItem('authCheckCount', (count + 1).toString());
                } else {
                    sessionStorage.setItem('authCheckCount', '1');
                }
                
                const isAuthenticated = localStorage.getItem('isAuthenticated');
                const userEmail = localStorage.getItem('userEmail');
                
                console.log('Auth check:', { isAuthenticated, userEmail });
                
                if (!isAuthenticated || !userEmail) {
                    console.log('Not authenticated, redirecting to login');
                    // Redirect to login if not authenticated
                    window.location.href = 'login.html';
                    return false;
                }
                
                // Update user email display for both desktop and mobile
                const desktopEmail = document.getElementById('userEmail');
                const mobileEmail = document.getElementById('userEmailMobile');
                
                if (desktopEmail) desktopEmail.textContent = userEmail;
                if (mobileEmail) mobileEmail.textContent = userEmail;
                
                // Clear auth check count on successful auth
                sessionStorage.removeItem('authCheckCount');
                console.log('Authentication successful');
                return true;
            } catch (error) {
                console.error('Authentication error:', error);
                // If localStorage fails, redirect to login
                window.location.href = 'login.html';
                return false;
            }
        }

        // Logout function
        function logout() {
            localStorage.removeItem('isAuthenticated');
            localStorage.removeItem('userEmail');
            localStorage.removeItem('loginTime');
            window.location.href = 'login.html';
        }

        // Tab navigation
        function showTab(tabName) {
            // Hide all content
            document.querySelectorAll('[id$="-content"]').forEach(el => el.classList.add('hidden'));
            
            // Remove active styling from all tabs
            document.querySelectorAll('[id$="-tab"]').forEach(el => {
                el.className = 'flex flex-col items-center space-y-1 py-3 px-2 rounded-lg font-medium text-xs text-brand-600 hover:text-brand-700 hover:bg-brand-50';
            });
            
            // Show selected content
            document.getElementById(tabName + '-content').classList.remove('hidden');
            
            // Add active styling to selected tab
            document.getElementById(tabName + '-tab').className = 'flex flex-col items-center space-y-1 py-3 px-2 rounded-lg font-medium text-xs bg-brand-100 text-primary-700';
        }

        // Module functions
        function startModule(moduleId) {
            progress.moduleStatus[moduleId] = 'in-progress';
            updateUserGuide();
            alert(`Starting Module ${moduleId}. This would open the module content.`);
        }

        function viewModule(moduleId) {
            const moduleContent = {
                1: {
                    title: "Introduction to FTD",
                    content: `
                <div class="bg-blue-50 p-4 rounded-lg mb-4">
                    
                <h4 class="font-semibold text-blue-900 mb-2">📋 Introduction to Forward Tipping Dumper</h4>
                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm mb-4">
                    <img src="extracted_images_optimized/page_01_img_01.jpg" alt="Introduction to Forward Tipping Dumper" class="w-full h-auto rounded-lg mb-3" style="max-height: 400px; object-fit: contain;" loading="lazy">
                    <h5 class="font-semibold text-gray-700 mb-2">Introduction to Forward Tipping Dumper</h5>
                    <p class="text-sm text-gray-600">Visual reference for introduction to forward tipping dumper</p>
                </div>
            
                
            
                
            
                    <div class="text-blue-800 text-sm leading-relaxed">
                        <p class="mb-3">A Forward Tipping Dumper (FTD) is commonly used on construction sites. It is used to transport large quantities of materials across a site, usually on rough, undulating terrain. Its ability to handle a mixture of terrain and carry large loads makes it a flexible piece of equipment.</p>
                        
                        <p class="mb-3">This course will equip you with the knowledge, skills and confidence to operate the machine safely, protecting both you and those around you. This course offers two certificate options: operating either a tracked or wheeled machine depending on your needs.</p>
                        
                        <h5 class="font-semibold text-blue-900 mb-2">Course Objectives:</h5>
                        <ul class="list-disc list-inside mb-3 space-y-1">
                            <li>Understand the relevant legislation relating to work activities</li>
                            <li>Comply with the manufacturer's instructions, using the operator's handbook and other information sources</li>
                            <li>Identify the hazards associated with plant or machinery operations and put the appropriate control measures in place</li>
                            <li>Identify the machine components and operator controls</li>
                            <li>Perform pre-shift and operational checks</li>
                            <li>Prepare the forward tipping dumper for site and road travel</li>
                            <li>Drive over various types of terrain</li>
                            <li>Manoeuvre in confined areas</li>
                            <li>Complete a range of loading procedures</li>
                            <li>Discharge loads into trenches or over edges</li>
                            <li>Explain the procedures for loading and unloading on and off a transporter</li>
                            <li>Shut down machinery safely and secure it at the end of the operation</li>
                        </ul>
                
        
                    </div>
                </div>
        
                
                <div class="bg-green-50 p-4 rounded-lg mb-4">
                    
                <h4 class="font-semibold text-green-900 mb-2">🛡️ Safe Working Practices</h4>
                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm mb-4">
                    <img src="extracted_images_optimized/site-safety.jpg" alt="Safe Working Practices" class="w-full h-auto rounded-lg mb-3" style="max-height: 400px; object-fit: contain;" loading="lazy">
                    <h5 class="font-semibold text-gray-700 mb-2">Safe Working Practices</h5>
                    <p class="text-sm text-gray-600">Visual reference for safe working practices</p>
                </div>
            
                
            
                
            
                    <div class="text-green-800 text-sm leading-relaxed">
                        <h5 class="font-semibold text-green-900 mb-2">Preparing for work:</h5>
                        <p class="mb-2">Conduct all pre-operational checks in accordance with manufacturers and legislative requirements.</p>
                        
                        <h5 class="font-semibold text-green-900 mb-2">Travelling and maneuvering:</h5>
                        <p class="mb-2">Travel and maneuver the forward tipping dumper safely across varying terrain and inclines.</p>
                        
                        <h5 class="font-semibold text-green-900 mb-2">Setting up for work:</h5>
                        <p class="mb-2">Conduct all necessary safety checks at the loading and discharging areas.</p>
                        
                        <h5 class="font-semibold text-green-900 mb-2">Working tasks:</h5>
                        <ul class="list-disc list-inside mb-2 space-y-1">
                            <li>Receive loads from other machines safely</li>
                            <li>Ensure load integrity and security</li>
                            <li>Tip safely into excavations or over edges</li>
                            <li>Consider environmental aspects of machine use</li>
                            <li>Follow loading/unloading procedures for machine transportation</li>
                        </ul>
                        
                        <h5 class="font-semibold text-green-900 mb-2">Shutting Down:</h5>
                        <p class="mb-2">Carry out all end of work and shut down procedures.</p>
                    </div>
                </div>
                
                <div class="bg-orange-50 p-4 rounded-lg mb-4">
                    <h4 class="font-semibold text-orange-900 mb-2">👤 Operator Roles & Responsibilities</h4>
                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm mb-4">
                    <div class="bg-blue-600 text-white p-6 rounded-lg text-center mb-4">
                        <h5 class="text-xl font-bold mb-2">📋 HSE Health & Safety Law</h5>
                        <p class="text-sm mb-4">Essential guidance for all workers and employers</p>
                        <a href="https://www.hse.gov.uk/pubns/lawleaflet.pdf" target="_blank" class="inline-block bg-white text-blue-600 px-6 py-2 rounded-lg font-semibold hover:bg-gray-100 transition-colors">
                            📖 View HSE Leaflet
                        </a>
                    </div>
                    <h5 class="font-semibold text-gray-700 mb-2">Operator Roles & Responsibilities</h5>
                    <p class="text-sm text-gray-600">Access the official HSE Health and Safety Law guidance for comprehensive information on worker and employer responsibilities</p>
                </div>
            
                
            
                    <div class="text-orange-800 text-sm leading-relaxed">
                        <p class="mb-3">As a 'safety critical' worker, plant operators are required to:</p>
                        <ul class="list-disc list-inside mb-3 space-y-1">
                            <li>Only use site plant or equipment if you are trained, competent and have been authorised to do so</li>
                            <li>Only authorised operators should hold vehicle keys</li>
                            <li>Work safely, efficiently and comply with the method statement</li>
                            <li>Be punctual and co-operate with other workers – this can contribute towards repeat business with the client or principal contractor</li>
                        </ul>
                        
                        <p class="mb-2">Operators should also be trained in the safe operation of the specific machine that they are required to operate, which will include:</p>
                        <ul class="list-disc list-inside space-y-1">
                            <li>Layout and operation of the controls</li>
                            <li>Stability limits</li>
                            <li>Daily checks and how to do them safely</li>
                        </ul>
                    </div>
                </div>
                
                <div class="bg-red-50 p-4 rounded-lg mb-4">
                    <h4 class="font-semibold text-red-900 mb-2">⚠️ Construction Site Operations</h4>
                    <div class="text-red-800 text-sm leading-relaxed">
                        <p>Construction sites are busy places and present many dangers. During this course you will be taught how to act responsibly on site, how to identify common hazards and how to operate your machine safely and efficiently on site to reduce to as low as possible the risks to you and others.</p>
                    </div>
                </div>
            `
                },
                2: {
                    title: "Health & Safety Legislation",
                    content: `
                <div class="bg-red-50 p-4 rounded-lg mb-4">
                    
                <h4 class="font-semibold text-red-900 mb-2">⚖️ Health and Safety at Work Act 1974</h4>
                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm mb-4">
                    <div class="bg-red-600 text-white p-6 rounded-lg text-center mb-4">
                        <h5 class="text-xl font-bold mb-2">⚖️ PUWER 1998 Regulations</h5>
                        <p class="text-sm mb-4">Provision and Use of Work Equipment Regulations</p>
                        <a href="https://www.hse.gov.uk/pubns/priced/puwer.pdf" target="_blank" class="inline-block bg-white text-red-600 px-6 py-2 rounded-lg font-semibold hover:bg-gray-100 transition-colors">
                            📖 View PUWER Guide
                        </a>
                    </div>
                    <h5 class="font-semibold text-gray-700 mb-2">Health and Safety at Work Act 1974</h5>
                    <p class="text-sm text-gray-600">Access the official PUWER 1998 guidance for comprehensive information on work equipment regulations and safety requirements</p>
                </div>
            
                
            
                
            
                    <div class="text-red-800 text-sm leading-relaxed">
                        <p class="mb-3">The Health and Safety at Work Act 1974 is designed to protect people and the environment from workplace activities. It places certain duties and responsibilities on employers, employees, self-employed, designers and manufactures.</p>
                    </div>
                </div>
                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm mb-4">
                    <div class="bg-blue-600 text-white p-6 rounded-lg text-center mb-4">
                        <h5 class="text-xl font-bold mb-2">📊 HSWA & PUWER Compliance</h5>
                        <p class="text-sm mb-4">Health and Safety at Work Act 1974 & PUWER 1998</p>
                        <a href="https://www.hse.gov.uk/pubns/priced/puwer.pdf" target="_blank" class="inline-block bg-white text-blue-600 px-6 py-2 rounded-lg font-semibold hover:bg-gray-100 transition-colors">
                            📖 View Full Guide
                        </a>
                    </div>
                    <h5 class="font-semibold text-gray-700 mb-2">Health & Safety Legislation Flowchart</h5>
                    <p class="text-sm text-gray-600">Access the official PUWER 1998 guidance for comprehensive information on HSWA 1974 and PUWER 98 compliance requirements</p>
                </div>
        
                
                <div class="bg-orange-50 p-4 rounded-lg mb-4">
                    
                <h4 class="font-semibold text-orange-900 mb-2">🔧 Provision & Use of Work Equipment Regulations 1998 (PUWER 98)</h4>
                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm mb-4">
                    <h5 class="font-semibold text-gray-700 mb-4 text-center">PUWER 1998 Risk Assessment Video</h5>
                    <div class="relative w-full" style="padding-bottom: 56.25%; height: 0; overflow: hidden;">
                        <iframe 
                            src="https://www.youtube.com/embed/xyANahuhGs0" 
                            title="Health and safety risk assessment and management" 
                            frameborder="0" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                            referrerpolicy="strict-origin-when-cross-origin" 
                            allowfullscreen
                            class="absolute top-0 left-0 w-full h-full rounded-lg"
                            style="border-radius: 8px;">
                        </iframe>
                    </div>
                    <p class="text-sm text-gray-600 mt-3 text-center">Interactive video guide for PUWER 1998 risk assessment and management</p>
                </div>
            
                
            
                
            
                    <div class="text-orange-800 text-sm leading-relaxed">
                        <p class="mb-3">Work equipment is any machinery, appliance, apparatus, tool or installation for use at work (whether exclusively or not). This includes equipment which employees provide for their own use at work. The scope of work equipment is therefore extremely wide.</p>
                        
                        <h5 class="font-semibold text-orange-900 mb-2">Key Requirements:</h5>
                        <ul class="list-disc list-inside mb-2 space-y-1">
                            <li>Machines must be stable when in use; machines have been known to fall over</li>
                            <li>ROPS (Roll Over Protective Structures) & FOPS (Falling Object Protective Structures) must be in place to provide some protection to the operator in the event of the machine overturning or from small falling objects</li>
                            <li>Equipment must be capable of being maintained safely</li>
                            <li>Accidents occur during maintenance thus the risks encountered during such maintenance must be reduced</li>
                        </ul>
                    </div>
                </div>
                
                <div class="bg-blue-50 p-4 rounded-lg mb-4">
                    
                <h4 class="font-semibold text-blue-900 mb-2">📋 Additional Legislation and Guidance</h4>
                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm mb-4">
                    <img src="extracted_images_optimized/page_14_img_02.jpg" alt="Additional Legislation and Guidance" class="w-full h-auto rounded-lg mb-3" style="max-height: 400px; object-fit: contain;" loading="lazy">
                    <h5 class="font-semibold text-gray-700 mb-2">Additional Legislation and Guidance</h5>
                    <p class="text-sm text-gray-600">Visual reference for additional legislation and guidance</p>
                </div>
            
                
            
                
            
                    <div class="text-blue-800 text-sm leading-relaxed">
                        <ul class="list-disc list-inside space-y-1">
                            <li>Management of Health and Safety at Work Regulations (MHSWR)</li>
                            <li>Construction (Design and Management) Regulations (CDM)</li>
                            <li>Vibration at Work Regulations</li>
                            <li>Road Traffic Act</li>
                            <li>HSG 114 – The safe use of vehicles on construction sites</li>
                            <li>HSG 46 – Guide for small contractors</li>
                            <li>Plant Safety Group – Safe use of dumpers</li>
                            <li>Control of Substances Hazardous to Health Regulations</li>
                            <li>The Control of Noise Regulations</li>
                        </ul>
                    </div>
                </div>
                
        
                
                <div class="bg-yellow-50 p-4 rounded-lg mb-4">
                    
                <h4 class="font-semibold text-yellow-900 mb-2">⚠️ Risk Assessments and Method Statements</h4>
                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm mb-4">
                    <img src="extracted_images_optimized/page_15_img_02.jpg" alt="Risk Assessments and Method Statements" class="w-full h-auto rounded-lg mb-3" style="max-height: 400px; object-fit: contain;" loading="lazy">
                    <h5 class="font-semibold text-gray-700 mb-2">Risk Assessments and Method Statements</h5>
                    <p class="text-sm text-gray-600">Visual reference for risk assessments and method statements</p>
                </div>
            
                
            
                
            
                    <div class="text-yellow-800 text-sm leading-relaxed">
                        <p class="mb-3">Employers are required by law to protect your employees, and others, from harm. Under the Management of Health and Safety at Work Regulations 1999, the minimum you must do is:</p>
                        <ul class="list-disc list-inside mb-3 space-y-1">
                            <li>Identify what could cause injury or illness in your business (hazards)</li>
                            <li>Decide how likely it is that someone could be harmed and how seriously (the risk)</li>
                            <li>Take action to eliminate the hazard, or if this isn't possible, control the risk</li>
                        </ul>
                        <p>The purpose of a Method Statement when on site is to document given specific instructions on how to SAFELY perform a work-related task. It is the plant operator's responsibility to COMPLY with the Method Statement.</p>
                    </div>
                </div>
                
                <div class="bg-green-50 p-4 rounded-lg mb-4">
                    <h4 class="font-semibold text-green-900 mb-2">👥 Social Responsibilities</h4>
                    
                    <!-- Knowledge Stop Questions -->
                    <div class="bg-white p-6 rounded-lg border-2 border-green-200 shadow-sm mb-4">
                        <h5 class="font-bold text-green-900 mb-4 text-center">📚 KNOWLEDGE STOP</h5>
                        <div class="space-y-4">
                            <div class="text-sm text-gray-800">
                                <p class="font-semibold mb-2">1. List SIX typical subject areas that should be covered in a site induction.</p>
                                <p class="text-green-700 ml-4">Answer: Access and egress, safety signs and signals, accident reporting, confined spaces, emergency procedures, buried services, reporting structure, first aid, fire procedures, welfare facilities, personal protective equipment, and environmental considerations.</p>
                            </div>
                            
                            <div class="text-sm text-gray-800">
                                <p class="font-semibold mb-2">2. Why are plant operators generally regarded as safety critical workers?</p>
                                <p class="text-green-700 ml-4">Answer: Because their actions with the machine can have significant health & safety consequences for themselves and others. Their competence directly affects workplace safety.</p>
                            </div>
                            
                            <div class="text-sm text-gray-800">
                                <p class="font-semibold mb-2">3. List THREE ways that a plant operator can contribute towards repeat business with the client or principal contractor.</p>
                                <p class="text-green-700 ml-4">Answer: Maintain high safety standards, complete work efficiently and on time, demonstrate professionalism and competence, follow site rules and procedures, communicate effectively with site personnel.</p>
                            </div>
                            
                            <div class="text-sm text-gray-800">
                                <p class="font-semibold mb-2">4. The function or job role of a dumper driver, when transporting materials, is to?</p>
                                <p class="text-green-700 ml-4">Answer: Safely transport materials from one location to another while maintaining control of the vehicle, following site procedures, and ensuring the safety of themselves and others.</p>
                            </div>
                            
                            <div class="text-sm text-gray-800">
                                <p class="font-semibold mb-2">5. How can a qualification or card benefit a plant operator?</p>
                                <p class="text-green-700 ml-4">Answer: Demonstrates competence and training, provides access to more job opportunities, shows commitment to professional development, ensures compliance with industry standards, and increases earning potential.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="text-green-800 text-sm leading-relaxed">
                        <p>In general plant operators are regarded as 'safety-critical' workers, which means their actions with the machine can have significant health & safety consequences for themselves and others. It is essential that all personnel involved in the planning, supervision and carrying out of mobile plant operations are adequately trained and competent for their role.</p>
                    </div>
                </div>
                
                <div class="bg-green-50 p-4 rounded-lg mb-4">
                    <h4 class="font-semibold text-green-900 mb-2">🏗️ Site Induction</h4>
                    
                    <!-- Knowledge Stop Questions -->
                    <div class="bg-white p-6 rounded-lg border-2 border-green-200 shadow-sm mb-4">
                        <h5 class="font-bold text-green-900 mb-4 text-center">📚 KNOWLEDGE STOP</h5>
                        <div class="space-y-4">
                            <div class="text-sm text-gray-800">
                                <p class="font-semibold mb-2">1. What is the purpose of a site induction?</p>
                                <p class="text-green-700 ml-4">Answer: To familiarise new workers with site-specific safety procedures, hazards, emergency procedures, and site rules before they begin work.</p>
                            </div>
                            
                            <div class="text-sm text-gray-800">
                                <p class="font-semibold mb-2">2. List SIX typical subject areas covered in a site induction.</p>
                                <p class="text-green-700 ml-4">Answer: Access and egress, safety signs and signals, accident reporting, confined spaces, emergency procedures, buried services, reporting structure, first aid, fire procedures, welfare facilities, personal protective equipment, and environmental considerations.</p>
                            </div>
                            
                            <div class="text-sm text-gray-800">
                                <p class="font-semibold mb-2">3. Why is it important to understand site-specific hazards?</p>
                                <p class="text-green-700 ml-4">Answer: Each site has unique hazards and risks that must be understood to work safely. This knowledge helps prevent accidents and ensures compliance with site safety requirements.</p>
                            </div>
                            
                            <div class="text-sm text-gray-800">
                                <p class="font-semibold mb-2">4. What should you do if you don't understand something during the site induction?</p>
                                <p class="text-green-700 ml-4">Answer: Ask questions and seek clarification from the induction presenter or site supervisor. It's better to ask than to work with incomplete information.</p>
                            </div>
                            
                            <div class="text-sm text-gray-800">
                                <p class="font-semibold mb-2">5. How often should site inductions be refreshed?</p>
                                <p class="text-green-700 ml-4">Answer: Site inductions should be refreshed when returning to a site after an extended absence, when site conditions change significantly, or as required by site policy (typically annually).</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="text-green-800 text-sm leading-relaxed">
                        <p class="mb-3">When starting work on a new site you will undergo a site induction. Familiarise yourself with some of the subject areas that will be included in a site induction:</p>
                        <ul class="list-disc list-inside space-y-1">
                            <li>Access and egress</li>
                            <li>Safety signs and signals</li>
                            <li>Accident reporting</li>
                            <li>Confined spaces</li>
                            <li>Emergency procedures</li>
                            <li>Buried services</li>
                            <li>Reporting structure</li>
                            <li>Contamination</li>
                            <li>PPE/RPE requirements</li>
                            <li>Electricity</li>
                            <li>Welfare facilities</li>
                            <li>Lifting operations</li>
                            <li>Reporting procedures</li>
                            <li>Working from/at height</li>
                            <li>Site Layout</li>
                            <li>Waste disposal</li>
                            <li>Traffic Routes</li>
                            <li>Smoking policy</li>
                            <li>Restricted/prohibited areas</li>
                        </ul>
                    </div>
                </div>
            `
                },
                3: {
                    title: "Pre-Operational Checks",
                    content: `
                <div class="bg-blue-50 p-4 rounded-lg mb-4">
                    
                <h4 class="font-semibold text-blue-900 mb-2">🔧 Major Components of a Forward Tipping Dumper</h4>
                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm mb-4">
                    <div class="bg-gray-50 rounded-lg mb-3 p-4">
                        <img src="extracted_images_optimized/page_17_img_02.jpg" alt="Major Components of a Forward Tipping Dumper" class="w-full h-auto rounded-lg" style="max-width: none; height: auto;" loading="lazy">
                    </div>
                    <h5 class="font-semibold text-gray-700 mb-2">Major Components of a Forward Tipping Dumper</h5>
                    <p class="text-sm text-gray-600">Visual reference for major components of a forward tipping dumper</p>
                </div>
            
                
            
                
            
                    <div class="text-blue-800 text-sm leading-relaxed">
                        <p class="mb-3">Understanding the major components is essential for safe operation and maintenance.</p>
                    </div>
                </div>
                
        
                
                <div class="bg-orange-50 p-4 rounded-lg mb-4">
                    <h4 class="font-semibold text-orange-900 mb-2">⛑️ Different Types of Dumper & Skips</h4>
                
            
                    <div class="text-orange-800 text-sm leading-relaxed">
                        <p class="mb-3">Various types of dumpers are available depending on the specific requirements of the job.</p>
                    </div>
                </div>
                
                <!-- Straight Skip Cabbed Dumper -->
                <div class="bg-blue-50 p-4 rounded-lg mb-4">
                    <h4 class="font-semibold text-blue-900 mb-2">⛑️ Straight Skip Cabbed Dumper</h4>
                    <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm mb-4">
                        <img src="extracted_images_optimized/page_01_img_01.jpg" alt="Straight Skip Cabbed Dumper" class="w-full h-auto rounded-lg mb-3" style="max-height: 400px; object-fit: contain;" loading="lazy">
                        <h5 class="font-semibold text-gray-700 mb-2">Straight Skip Cabbed Dumper</h5>
                        <p class="text-sm text-gray-600">Forward Tipping Dumper Overview for straight skip cabbed dumper</p>
                        <p class="text-xs text-gray-500 mt-2">Source: page_01_img_01.jpg</p>
                    </div>
                    <div class="text-blue-800 text-sm leading-relaxed">
                        <p class="mb-3">The straight skip cabbed dumper features a fixed skip design with an enclosed operator cab for enhanced safety and comfort.</p>
                        <ul class="list-disc list-inside space-y-1">
                            <li>Fixed skip design for consistent load capacity</li>
                            <li>Enclosed operator cab for weather protection</li>
                            <li>Enhanced visibility and operator comfort</li>
                            <li>Suitable for general construction and material handling</li>
                        </ul>
                    </div>
                </div>
                
                <!-- Forward Tipping Dumper -->
                <div class="bg-green-50 p-4 rounded-lg mb-4">
                    <h4 class="font-semibold text-green-900 mb-2">🚜 Forward Tipping Dumper</h4>
                    <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm mb-4">
                        <img src="extracted_images_optimized/page_18_img_03.jpg" alt="Forward Tipping Dumper" class="w-full h-auto rounded-lg mb-3" style="max-height: 400px; object-fit: contain;" loading="lazy">
                        <h5 class="font-semibold text-gray-700 mb-2">Forward Tipping Dumper</h5>
                        <p class="text-sm text-gray-600">Visual reference for forward tipping dumper with PPE requirements</p>
                    </div>
                    <div class="text-green-800 text-sm leading-relaxed">
                        <p class="mb-3">The forward tipping dumper features a hydraulically operated skip that tips forward to discharge materials.</p>
                        <ul class="list-disc list-inside space-y-1">
                            <li>Hydraulic tipping mechanism for material discharge</li>
                            <li>Articulated steering for maneuverability</li>
                            <li>High visibility design for safety</li>
                            <li>Ideal for construction and earthmoving operations</li>
                        </ul>
                    </div>
                </div>
                
                <!-- Hi-Tip Skid Loader -->
                <div class="bg-purple-50 p-4 rounded-lg mb-4">
                    <h4 class="font-semibold text-purple-900 mb-2">🚜 Hi-Tip Skid Loader</h4>
                    <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm mb-4">
                        <img src="extracted_images_optimized/hi_top_skid_loader.jpg" alt="Hi-Tip Skid Loader" class="w-full h-auto rounded-lg mb-3" style="max-height: 400px; object-fit: contain;" loading="lazy">
                        <h5 class="font-semibold text-gray-700 mb-2">Hi-Tip Skid Loader</h5>
                        <p class="text-sm text-gray-600">Visual reference for hi-tip skid loader</p>
                        <p class="text-xs text-gray-500 mt-2">Source: hi_top_skid_loader.jpg</p>
                    </div>
                    <div class="text-purple-800 text-sm leading-relaxed">
                        <p class="mb-3">The hi-tip skid loader features a high-lift capability with a skid steer design for maximum maneuverability.</p>
                        <ul class="list-disc list-inside space-y-1">
                            <li>High-lift capability for elevated material handling</li>
                            <li>Skid steer design for tight space maneuverability</li>
                            <li>Versatile attachment system</li>
                            <li>Ideal for confined spaces and specialized applications</li>
                        </ul>
                    </div>
                </div>
                
                <div class="bg-green-50 p-4 rounded-lg mb-4">
                    <h4 class="font-semibold text-green-900 mb-2">⚙️ Principal Components of the Machine</h4>
                
            
                    <div class="text-green-800 text-sm leading-relaxed">
                        <h5 class="font-semibold text-green-900 mb-2">Power Unit – Oils:</h5>
                        <p class="mb-2">Always wear gloves when checking engine oil to prevent skin disease and contamination of oil onto the operating controls and the cab.</p>
                        
                        <h5 class="font-semibold text-green-900 mb-2">Hydraulic System:</h5>
                        <p class="mb-2">Always ensure the filler cap area is clean and pressure in the system is released before removing the cap. Always use a clean container when filling the system to prevent contamination.</p>
                        
                        <h5 class="font-semibold text-green-900 mb-2">Fuel System:</h5>
                        <p class="mb-2">Where possible, plant should be filled up at the end of your shift to prevent condensation building up in the tank.</p>
                        
                        <h5 class="font-semibold text-green-900 mb-2">Cooling System:</h5>
                        <p class="mb-2">Cooling systems are normally pressurised and removing the cap can allow hot water to escape with the potential for causing SEVERE burns.</p>
                        
                        <h5 class="font-semibold text-green-900 mb-2">Roll Over Protective Structure (ROPS):</h5>
                        <p class="mb-2">ROPS provides some protection to the operating position (as far as is reasonably practicable) in the event of an overturn.</p>
                        
                        <h5 class="font-semibold text-green-900 mb-2">Falling Object Protective Structures (FOPS):</h5>
                        <p class="mb-2">Where there is the risk of people operating mobile work equipment being struck by falling material, falling object protective structures (FOPS) or a manufacturer's strengthened cab must be fitted to stop any falling material striking the operator. When sitting in an enclosed cab that meets FOPS criteria, a hard hat does not need to be worn.</p>
                        
                        <h5 class="font-semibold text-green-900 mb-2">Restraining Systems:</h5>
                        <p class="mb-2">Seat belts must be worn even when the cab door is closed. This is because in the event of a roll over (as far as reasonably practical), it will keep the operator within the confines of the operating seat which may minimise injury.</p>
                        
                        <h5 class="font-semibold text-green-900 mb-2">Tyres:</h5>
                        <p class="mb-2">Raised lugs on tyres provide traction / grip for moving, steering and braking in soft mud. If tyres are worn, traction and grip will be severely affected.</p>
                    </div>
                </div>
                
                <div class="bg-red-50 p-4 rounded-lg mb-4">
                    <h4 class="font-semibold text-red-900 mb-2">✅ Pre-Operational Checks</h4>
                    
                    <!-- Training Video -->
                    <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm mb-4">
                        <h5 class="font-semibold text-gray-700 mb-4 text-center">Dual View Dumper Daily Checks Training Video</h5>
                        <div class="relative w-full" style="padding-bottom: 56.25%; height: 0; overflow: hidden;">
                            <iframe 
                                src="https://www.youtube.com/embed/PH5XD__tMeg" 
                                title="Training Videos - Dual View Dumper Daily Checks" 
                                frameborder="0" 
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                referrerpolicy="strict-origin-when-cross-origin" 
                                allowfullscreen
                                class="absolute top-0 left-0 w-full h-full rounded-lg"
                                style="border-radius: 8px;">
                            </iframe>
                        </div>
                        <p class="text-sm text-gray-600 mt-3 text-center">Interactive training video for comprehensive pre-operational checks</p>
                    </div>
                    
                    <div class="text-red-800 text-sm leading-relaxed">
                        <p class="mb-3">The Health and Safety at Work Act 1974 states that employees must take reasonable care of themselves and others who may be affected by their actions. It is a requirement to check that the machine is safe to use prior to using it.</p>
                        <p class="mb-3">The following items must be checked prior to use:</p>
                        <ul class="list-disc list-inside space-y-1">
                            <li>Visual inspection of the machine exterior</li>
                            <li>Check fluid levels (engine oil, hydraulic fluid, fuel)</li>
                            <li>Inspect tires and tracks for damage</li>
                            <li>Test safety systems and controls</li>
                            <li>Verify documentation and certification</li>
                            <li>Check for any visible leaks or damage</li>
                        </ul>
                    </div>
                </div>
        
                
                <div class="bg-yellow-50 p-4 rounded-lg mb-4">
                    
                <h4 class="font-semibold text-yellow-900 mb-2">🛡️ Personal Protective Equipment (PPE)</h4>
                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm mb-4">
                    <img src="extracted_images_optimized/page_18_img_03.jpg" alt="Personal Protective Equipment (PPE)" class="w-full h-auto rounded-lg mb-3" style="max-height: 400px; object-fit: contain;" loading="lazy">
                    <h5 class="font-semibold text-gray-700 mb-2">Personal Protective Equipment (PPE)</h5>
                    <p class="text-sm text-gray-600">Visual reference for personal protective equipment (ppe)</p>
                </div>
            
                
            
                
            
                    <div class="text-yellow-800 text-sm leading-relaxed">
                        <p class="mb-3">Always ensure that you wear the full PPE required for the site that you are working on:</p>
                        <ul class="list-disc list-inside space-y-1">
                            <li>Head protection</li>
                            <li>Foot protection</li>
                            <li>High-visibility clothing</li>
                            <li>Weather-appropriate clothing</li>
                            <li>Hearing protection</li>
                            <li>Eye protection</li>
                            <li>Gloves</li>
                        </ul>
                    </div>
                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm mb-4">
                    <img src="extracted_images_optimized/page_18_img_03.jpg" alt="PPE Requirements" class="w-full h-auto rounded-lg mb-3" style="max-height: 400px; object-fit: contain;" loading="lazy">
                    <h5 class="font-semibold text-gray-700 mb-2">Personal Protective Equipment Requirements</h5>
                    <p class="text-sm text-gray-600">Complete PPE checklist for FTD operators</p>
                    <p class="text-xs text-gray-500 mt-2">Source: page_18_img_03.jpg (715x429)</p>
                </div>
        
                </div>
            `
                },
                4: {
                    title: "Machine Operation",
                    content: `
                <div class="bg-green-50 p-4 rounded-lg mb-4">
                    <h4 class="font-semibold text-green-900 mb-2">🚶 Safely Get On and Off the Forward Tipping Dumper</h4>
                    <div class="text-green-800 text-sm leading-relaxed">
                        <ul class="list-disc list-inside space-y-1">
                            <li>Face the machine using the specific steps and handrails provided</li>
                            <li>Maintain 3 points of contact wherever possible</li>
                            <li>Ensure the steps and handrails are clean and clear of debris in your daily checks</li>
                            <li>Ensure the ground you are stepping out onto or walking on is firm and clear of obstructions before existing the cab</li>
                            <li>Wearing the correct boots can eliminate injuries. Ensure they are laced up fully and worn correctly</li>
                        </ul>
                    </div>
                </div>
                
                <div class="bg-blue-50 p-4 rounded-lg mb-4">
                    <h4 class="font-semibold text-blue-900 mb-2">⚙️ Prepare and Configure the FTD for Site Travel</h4>
                    <div class="text-blue-800 text-sm leading-relaxed">
                        <ul class="list-disc list-inside space-y-1">
                            <li>Engine cover – secured</li>
                            <li>Check parking brake – on</li>
                            <li>Check controls are neutralised</li>
                            <li>Adjust seat for comfort / reach</li>
                            <li>Adjust steering column as appropriate</li>
                            <li>Wear seatbelt – adjust as required</li>
                            <li>Foot brake – pressure</li>
                        </ul>
                    </div>
                </div>
                
        
                
                <div class="bg-orange-50 p-4 rounded-lg mb-4">
                    
                <h4 class="font-semibold text-orange-900 mb-2">👁️ Visibility Aids</h4>
                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm mb-4">
                    <img src="extracted_images_optimized/page_22_img_02.jpg" alt="Visibility Aids" class="w-full h-auto rounded-lg mb-3" style="max-height: 400px; object-fit: contain;" loading="lazy">
                    <h5 class="font-semibold text-gray-700 mb-2">Visibility Aids</h5>
                    <p class="text-sm text-gray-600">Visual reference for visibility aids</p>
                </div>
            
                
            
                
            
                    <div class="text-orange-800 text-sm leading-relaxed">
                        <p class="mb-3">Always ensure that all mirrors / cameras are correctly fitted, unbroken, clean, and correctly adjusted. Check that ALL mirrors are clean and correctly positioned to provide you with a clear, unobstructed view behind the dumper.</p>
                    </div>
                </div>
                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm mb-4">
                    <img src="extracted_images_optimized/page_22_img_02.jpg" alt="Visibility Aids Diagram" class="w-full h-auto rounded-lg mb-3" style="max-height: 400px; object-fit: contain;" loading="lazy">
                    <h5 class="font-semibold text-gray-700 mb-2">Visibility Aids and Safety Systems</h5>
                    <p class="text-sm text-gray-600">Mirror positioning and camera system setup</p>
                    <p class="text-xs text-gray-500 mt-2">Source: page_22_img_02.jpg (355x473)</p>
                </div>
        
                
                <div class="bg-red-50 p-4 rounded-lg mb-4">
                    
                <h4 class="font-semibold text-red-900 mb-2">⚠️ Operating in Confined Areas</h4>
                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm mb-4">
                    <img src="extracted_images_optimized/page_25_img_02.jpg" alt="Operating in Confined Areas" class="w-full h-auto rounded-lg mb-3" style="max-height: 400px; object-fit: contain;" loading="lazy">
                    <h5 class="font-semibold text-gray-700 mb-2">Operating in Confined Areas</h5>
                    <p class="text-sm text-gray-600">Visual reference for operating in confined areas</p>
                </div>
            
                
            
                
            
                    <div class="text-red-800 text-sm leading-relaxed">
                        <h5 class="font-semibold text-red-900 mb-2">The Spillard Human Detection System:</h5>
                        <p class="mb-2">Identifies only human form through deep intelligent mapping. It aims to:</p>
                        <ul class="list-disc list-inside mb-3 space-y-1">
                            <li>Warn operators and pedestrians of potential risks of collision</li>
                            <li>Improve operators all around awareness of their surroundings</li>
                            <li>Detect human form whilst ignoring ever changing backgrounds</li>
                            <li>Reduce risk whilst improving the operator and pedestrian interaction</li>
                        </ul>
                        <p class="mb-3">The human detection system is an aid to safety only. It must be used in addition to the site's safe system of work.</p>
                        
                        <h5 class="font-semibold text-red-900 mb-2">Safety Shield AI Collision Avoidance Technology:</h5>
                        <p class="mb-2">Safety Shield is an advanced AI human form recognition safety system. The system cleverly integrates AI human form recognition (HFR) with strategically placed HD cameras. The in-cab LED visual and audio alert warns the driver of a pedestrian in proximity.</p>
                    </div>
                </div>
                
                <div class="bg-purple-50 p-4 rounded-lg mb-4">
                    <h4 class="font-semibold text-purple-900 mb-2">🚜 Travel and Manoeuvre the Dumper</h4>
                
            
                    <div class="text-purple-800 text-sm leading-relaxed">
                        <p class="mb-3">When travelling and manoeuvring the dumper, it is important to ensure machine stability to reduce the risk of the dumper becoming stuck or tipping over. When operating a rotating seat dumper, you can change the seat and console position to allow the operator the best viewpoint while travelling, manoeuvring and operating the machine. The entire operating platform rotates 180 degrees.</p>
                        
                        <h5 class="font-semibold text-purple-900 mb-2">Travel and Manoeuvre in Areas of Restricted Space:</h5>
                        <p class="mb-2">It is important that all work near to overhead lines is properly planned and managed to reduce the risk of accidents. The Health and Safety Executive publication 'Avoiding danger from overhead power lines' (GS6) gives valuable information and guidance on how to safely plan and set up work near to overhead power lines. High voltage electricity can arc across large gaps in certain conditions.</p>
                    </div>
                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm mb-4">
                    <img src="extracted_images_optimized/page_22_img_03.jpg" alt="Rotating Seat Dumper" class="w-full h-auto rounded-lg mb-3" style="max-height: 400px; object-fit: contain;" loading="lazy">
                    <h5 class="font-semibold text-gray-700 mb-2">Rotating Seat Dumper Operation</h5>
                    <p class="text-sm text-gray-600">180-degree rotating platform for optimal visibility</p>
                    <p class="text-xs text-gray-500 mt-2">Source: page_22_img_03.jpg (312x148)</p>
                </div>
        
                </div>
            `
                },
                5: {
                    title: "Environmental Considerations",
                    content: `
                <div class="bg-green-50 p-4 rounded-lg mb-4">
                    <h4 class="font-semibold text-green-900 mb-2">📦 Loading, Transporting and Discharging Different Materials</h4>
                    <div class="text-green-800 text-sm leading-relaxed">
                        <h5 class="font-semibold text-green-900 mb-2">Denser materials:</h5>
                        <p class="mb-2">May overload your tyres and may stick to the body when tipping. You may need to tip at different locations.</p>
                        
                        <h5 class="font-semibold text-green-900 mb-2">Semi-Fluid materials:</h5>
                        <p class="mb-2">May spill during travel.</p>
                        
                        <h5 class="font-semibold text-green-900 mb-2">Spoil:</h5>
                        <p class="mb-2">This material should be segregated for re-use on or off-site, where possible. It must be placed a minimum distance of the depth of the trench away from the excavation to prevent collapse.</p>
                    </div>
                </div>
                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm mb-4">
                    <img src="extracted_images_optimized/page_28_img_02.jpg" alt="Material Handling Procedures" class="w-full h-auto rounded-lg mb-3" style="max-height: 400px; object-fit: contain;" loading="lazy">
                    <h5 class="font-semibold text-gray-700 mb-2">Material Handling and Transportation</h5>
                    <p class="text-sm text-gray-600">Safe procedures for different material types</p>
                    <p class="text-xs text-gray-500 mt-2">Source: page_28_img_02.jpg (562x591)</p>
                </div>
                
        
        
                
                <div class="bg-blue-50 p-4 rounded-lg mb-4">
                    <h4 class="font-semibold text-blue-900 mb-2">🛣️ Travelling on a Public Highway</h4>
                    <div class="text-blue-800 text-sm leading-relaxed">
                        <p class="mb-3">When travelling on the public highway, the machine must adhere to the following requirements by law:</p>
                        <ul class="list-disc list-inside mb-3 space-y-1">
                            <li>The dumper must be registered and taxed as a "special vehicle"</li>
                            <li>The dumper must have vehicle insurance</li>
                            <li>If the dumper can exceed 20 mph it must have a horn in good working condition</li>
                            <li>If it can exceed 25 mph it must have a speedometer in good working condition</li>
                            <li>It must have brakes that enable it to stop</li>
                            <li>It must have lights and indicators</li>
                        </ul>
                        
                        <h5 class="font-semibold text-blue-900 mb-2">The operator must:</h5>
                        <ul class="list-disc list-inside space-y-1">
                            <li>Hold a full UK or approved car license (Category B)</li>
                            <li>Be a minimum of 18 years old for vehicles between 3.5T and 7.5T</li>
                            <li>Be a minimum of 21 years old for vehicles exceeding 7.5T (MAM)</li>
                        </ul>
                    </div>
                </div>
                
                <div class="bg-orange-50 p-4 rounded-lg mb-4">
                    <h4 class="font-semibold text-orange-900 mb-2">🔗 Towing Equipment with a Dumper – Enhanced Training</h4>
                    <div class="text-orange-800 text-sm leading-relaxed">
                        <p class="mb-3">Some dumpers have the capability to tow equipment such as small bowsers and compressors. As dumpers are not specifically designed for towing purposes, other methods should be explored before deciding on this purpose. Towing with a dumper requires enhanced training, in addition to the training delivered within the Skills Bootcamp programme.</p>
                        
                        <h5 class="font-semibold text-orange-900 mb-2">Should you be asked to tow equipment, you must consider the following points:</h5>
                        <ul class="list-disc list-inside space-y-1">
                            <li>All options have been considered and there no other more suitable machine is available</li>
                            <li>Towing activities are authorised by the manufacturer of the dumper to be used</li>
                            <li>The equipment to be towed does not exceed the specification set by the manufacturer in terms of the weight of the equipment and the downward load imposed on the towing point</li>
                            <li>The towing bracket is compatible with the towing eye on the equipment to be towed</li>
                            <li>You have been trained and are competent to carry out towing activities</li>
                            <li>The correct towing pin for the towing bracket is used and that the safety pin is located correctly in the towing pin</li>
                            <li>Towing balls come in a variety of sizes and where the size of ball differs from the towed equipment's towing hitch, there is a danger that the hitch can dislodge from the ball and the towed equipment become detached from the dumper</li>
                            <li>The manufacturers handbook should be consulted to ensure a full understanding of the towing restrictions placed by the manufacturer</li>
                            <li>The towing ability of the dumper may depend on whether the trailer is fitted with an overrun brake or is non-braked. Using an overweight non-braked trailer could cause loss of control during the braking activity</li>
                        </ul>
                    </div>
                </div>
                
                <div class="bg-red-50 p-4 rounded-lg mb-4">
                    
                <h4 class="font-semibold text-red-900 mb-2">📋 Loading/Unloading Procedures for Machine Transportation</h4>
                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm mb-4">
                    <img src="extracted_images_optimized/page_31_img_04.jpg" alt="Unloading Procedures" class="w-full h-auto rounded-lg mb-3" style="max-height: 400px; object-fit: contain;" loading="lazy">
                    <h5 class="font-semibold text-gray-700 mb-2">Unloading Procedures</h5>
                    <p class="text-sm text-gray-600">Visual reference for unloading procedures</p>
                </div>
            
                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm mb-4">
                    <img src="extracted_images_optimized/page_31_img_03.jpg" alt="Loading Procedures" class="w-full h-auto rounded-lg mb-3" style="max-height: 400px; object-fit: contain;" loading="lazy">
                    <h5 class="font-semibold text-gray-700 mb-2">Loading Procedures</h5>
                    <p class="text-sm text-gray-600">Visual reference for loading procedures</p>
                </div>
            
                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm mb-4">
                    <img src="extracted_images_optimized/page_31_img_02.jpg" alt="Loading/Unloading Procedures" class="w-full h-auto rounded-lg mb-3" style="max-height: 400px; object-fit: contain;" loading="lazy">
                    <h5 class="font-semibold text-gray-700 mb-2">Loading/Unloading Procedures</h5>
                    <p class="text-sm text-gray-600">Visual reference for loading/unloading procedures</p>
                </div>
            
                
            
                
            
                    <div class="text-red-800 text-sm leading-relaxed">
                        <p class="mb-3">The transporter driver is responsible for loading operations. The following checks should be made before loading commences:</p>
                        <ul class="list-disc list-inside mb-3 space-y-1">
                            <li>Ground support</li>
                            <li>Ramp condition</li>
                            <li>Overhead and other hazards</li>
                            <li>Positioning on trailer</li>
                            <li>Direction of travel</li>
                        </ul>
                        
                        <h5 class="font-semibold text-red-900 mb-2">The following process should be followed when loading the transporter:</h5>
                        <ul class="list-disc list-inside space-y-1">
                            <li>Remove any dirt or debris from the trailer</li>
                            <li>Check parking brake</li>
                            <li>Check trailer bodywork for signs of damage</li>
                            <li>Position loading ramps securely on the transporter</li>
                            <li>Stop the engine and secure the machine</li>
                            <li>Chock wheels to prevent movement</li>
                            <li>Engage chassis locking bar</li>
                            <li>Secure to the trailer</li>
                            <li>Ensure legal load (height/weight of trailer)</li>
                        </ul>
                    </div>
                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm mb-4">
                    <img src="extracted_images_optimized/page_35_img_02.jpg" alt="Machine Transportation Procedures" class="w-full h-auto rounded-lg mb-3" style="max-height: 400px; object-fit: contain;" loading="lazy">
                    <h5 class="font-semibold text-gray-700 mb-2">Machine Transportation and Loading</h5>
                    <p class="text-sm text-gray-600">Safe procedures for loading and unloading FTDs</p>
                    <p class="text-xs text-gray-500 mt-2">Source: page_35_img_02.jpg (259x346)</p>
                </div>
        
                </div>
            `
                },
                6: {
                    title: "Assessment & Certification",
                    content: `
                <div class="bg-green-50 p-4 rounded-lg mb-4">
                    <h4 class="font-semibold text-green-900 mb-2">🌍 Environmental Considerations of Machine Use</h4>
                    <div class="text-green-800 text-sm leading-relaxed">
                        <p class="mb-3">The main types of pollution associated with construction operations are:</p>
                        <ul class="list-disc list-inside mb-3 space-y-1">
                            <li>Air pollution</li>
                            <li>Water pollution</li>
                            <li>Noise pollution</li>
                        </ul>
                        
                        <h5 class="font-semibold text-green-900 mb-2">There are various pollution prevention strategies that can be used. Operators can minimise their effect on the environment by using the machine efficiently:</h5>
                        <ul class="list-disc list-inside space-y-1">
                            <li>Lower engine speeds where possible</li>
                            <li>Ensure there is no spillage of fluids</li>
                            <li>Keep the machine well maintained</li>
                            <li>Ensure prior planning of the work task</li>
                        </ul>
                    </div>
                </div>
                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm mb-4">
                    <img src="extracted_images_optimized/page_29_img_02.jpg" alt="Environmental Impact Considerations" class="w-full h-auto rounded-lg mb-3" style="max-height: 400px; object-fit: contain;" loading="lazy">
                    <h5 class="font-semibold text-gray-700 mb-2">Environmental Impact Considerations</h5>
                    <p class="text-sm text-gray-600">Pollution prevention and environmental best practices</p>
                    <p class="text-xs text-gray-500 mt-2">Source: page_29_img_02.jpg (445x146)</p>
                </div>
                
        
        
                
                <div class="bg-blue-50 p-4 rounded-lg mb-4">
                    <h4 class="font-semibold text-blue-900 mb-2">📚 Complete Glossary of Terms</h4>
                
            
                    <div class="text-blue-800 text-sm leading-relaxed">
                        <p class="mb-3">The glossary contains over 50 comprehensive terms and definitions essential for FTD operation:</p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <h5 class="font-semibold text-blue-900 mb-2">Key Terms Include:</h5>
                                <ul class="list-disc list-inside space-y-1 text-xs">
                                    <li>Forward Tipping Dumper</li>
                                    <li>ROPS (Roll Over Protective Structure)</li>
                                    <li>FOPS (Falling Object Protective Structure)</li>
                                    <li>Load Capacity</li>
                                    <li>Load Integrity</li>
                                    <li>Banksman</li>
                                    <li>Exclusion Zone</li>
                                    <li>Risk Assessment</li>
                                    <li>Method Statement</li>
                                    <li>PPE (Personal Protective Equipment)</li>
                                </ul>
                            </div>
                            <div>
                                <h5 class="font-semibold text-blue-900 mb-2">Safety Terms:</h5>
                                <ul class="list-disc list-inside space-y-1 text-xs">
                                    <li>Safety Critical</li>
                                    <li>Crush Zone</li>
                                    <li>Deadman</li>
                                    <li>Edge Protection</li>
                                    <li>Visibility Aids</li>
                                    <li>Reversing Alarm</li>
                                    <li>Human Form Recognition</li>
                                    <li>Safety Shield</li>
                                    <li>Traffic Management Plan</li>
                                    <li>Emergency Procedures</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="bg-yellow-50 p-4 rounded-lg mb-4">
                    
                <h4 class="font-semibold text-yellow-900 mb-2">📋 End of Work and Shut Down Procedures</h4>
                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm mb-4">
                    <img src="extracted_images_optimized/page_36_img_02.jpg" alt="End of Work and Shut Down Procedures" class="w-full h-auto rounded-lg mb-3" style="max-height: 400px; object-fit: contain;" loading="lazy">
                    <h5 class="font-semibold text-gray-700 mb-2">End of Work and Shut Down Procedures</h5>
                    <p class="text-sm text-gray-600">Visual reference for end of work and shut down procedures</p>
                </div>
            
                
            
                
            
                    <div class="text-yellow-800 text-sm leading-relaxed">
                        <p class="mb-3">When parking the machine at the end of the work period, you must follow the full shut down procedure. Consider where you park your machine.</p>
                        <p class="mb-3"><strong>DO NOT park your machine on:</strong></p>
                        <ul class="list-disc list-inside space-y-1">
                            <li>Site roads</li>
                            <li>Pedestrian routes</li>
                            <li>Soft/wet/steep ground</li>
                            <li>Blocking access / egress routes from buildings</li>
                        </ul>
                    </div>
                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm mb-4">
                    <img src="extracted_images_optimized/page_35_img_03.jpg" alt="Exclusion Zone Safety" class="w-full h-auto rounded-lg mb-3" style="max-height: 400px; object-fit: contain;" loading="lazy">
                    <h5 class="font-semibold text-gray-700 mb-2">Exclusion Zone Safety</h5>
                    <p class="text-sm text-gray-600">Safe working areas and exclusion zone requirements</p>
                    <p class="text-xs text-gray-500 mt-2">Source: page_35_img_03.jpg (444x148)</p>
                </div>
        
                </div>
            `
                }
            };
            
            const module = moduleContent[moduleId];
            if (module) {
                document.getElementById('moduleTitle').textContent = module.title;
                document.getElementById('moduleContent').innerHTML = module.content;
                document.getElementById('moduleModal').classList.remove('hidden');
            } else {
                alert(`Module ${moduleId} content coming soon!`);
            }
        }

        function closeModule() {
            document.getElementById('moduleModal').classList.add('hidden');
        }

        // Test System
        let currentTest = null;
        let testTimer = null;
        let testStartTime = null;

        // Test data structure
        const testData = {
            1: {
                title: "Module 1: Introduction to FTD",
                timeLimit: 20, // minutes
                questions: [
                    {
                        id: 1,
                        type: "multiple_choice",
                        question: "What are the two main plant operator card schemes in the construction plant training sector?",
                        options: [
                            "CPCS and NPORS",
                            "CITB and CPCS", 
                            "NPORS and CITB",
                            "HSE and CPCS"
                        ],
                        correct: 0,
                        explanation: "CPCS (Construction Plant Competence Scheme) and NPORS (National Plant Operators Registration Scheme) are the two main schemes."
                    },
                    {
                        id: 2,
                        type: "multiple_choice",
                        question: "What is the primary purpose of a Forward Tipping Dumper?",
                        options: [
                            "To lift heavy objects",
                            "To transport materials across rough terrain",
                            "To dig trenches",
                            "To compact soil"
                        ],
                        correct: 1,
                        explanation: "FTDs are designed to transport large quantities of materials across rough, undulating terrain on construction sites."
                    },
                    {
                        id: 3,
                        type: "open_ended",
                        question: "List three key course objectives for FTD operation training.",
                        correctAnswers: [
                            "Understand relevant legislation",
                            "Identify machine components",
                            "Perform pre-shift checks",
                            "Drive over various terrain",
                            "Manoeuvre in confined areas",
                            "Complete loading procedures",
                            "Discharge loads safely"
                        ],
                        explanation: "The course covers legislation, machine knowledge, safety checks, operation skills, and material handling."
                    },
                    {
                        id: 4,
                        type: "multiple_choice",
                        question: "Which of the following is NOT a typical FTD operation?",
                        options: [
                            "Transporting materials",
                            "Tipping loads forward",
                            "Digging foundations",
                            "Manoeuvring in confined spaces"
                        ],
                        correct: 2,
                        explanation: "FTDs are for transporting and tipping materials, not for digging foundations."
                    },
                    {
                        id: 5,
                        type: "open_ended",
                        question: "Explain why FTDs are considered flexible equipment on construction sites.",
                        correctAnswers: [
                            "Handle mixed terrain",
                            "Carry large loads",
                            "Versatile operation",
                            "Suitable for various materials"
                        ],
                        explanation: "FTDs are flexible because they can handle different types of terrain and carry various materials efficiently."
                    }
                ]
            },
            2: {
                title: "Module 2: Health & Safety Legislation",
                timeLimit: 25,
                questions: [
                    {
                        id: 1,
                        type: "multiple_choice",
                        question: "What does HSWA 1974 stand for?",
                        options: [
                            "Health and Safety Work Act",
                            "Health and Safety at Work Act",
                            "Health and Safety Workers Act",
                            "Health and Safety Workplace Act"
                        ],
                        correct: 1,
                        explanation: "HSWA 1974 stands for the Health and Safety at Work Act 1974."
                    },
                    {
                        id: 2,
                        type: "multiple_choice",
                        question: "What does PUWER 98 regulate?",
                        options: [
                            "Personal protective equipment",
                            "Provision and Use of Work Equipment Regulations",
                            "Plant and equipment safety",
                            "Both B and C"
                        ],
                        correct: 3,
                        explanation: "PUWER 98 regulates the Provision and Use of Work Equipment Regulations and covers plant and equipment safety."
                    },
                    {
                        id: 3,
                        type: "open_ended",
                        question: "What are the key requirements under PUWER 98 for work equipment?",
                        correctAnswers: [
                            "Suitable for intended use",
                            "Safe for use",
                            "Maintained in safe condition",
                            "Used by trained personnel",
                            "Inspected regularly"
                        ],
                        explanation: "PUWER 98 requires equipment to be suitable, safe, maintained, used by trained people, and regularly inspected."
                    },
                    {
                        id: 4,
                        type: "multiple_choice",
                        question: "What must ROPS and FOPS provide?",
                        options: [
                            "Operator comfort",
                            "Roll Over and Falling Object Protection",
                            "Better visibility",
                            "Fuel efficiency"
                        ],
                        correct: 1,
                        explanation: "ROPS (Roll Over Protective Structures) and FOPS (Falling Object Protective Structures) provide safety protection."
                    },
                    {
                        id: 5,
                        type: "open_ended",
                        question: "What is the operator's responsibility regarding Method Statements?",
                        correctAnswers: [
                            "Comply with them",
                            "Follow procedures",
                            "Report issues",
                            "Ensure safety"
                        ],
                        explanation: "Operators must comply with Method Statements and follow all safety procedures outlined."
                    }
                ]
            },
            3: {
                title: "Module 3: Pre-Operational Checks",
                timeLimit: 30,
                questions: [
                    {
                        id: 1,
                        type: "multiple_choice",
                        question: "What PPE is required for FTD operation?",
                        options: [
                            "Hard hat and safety boots only",
                            "Full PPE including hi-vis clothing",
                            "Just safety boots",
                            "No special PPE required"
                        ],
                        correct: 1,
                        explanation: "Full PPE including hard hat, safety boots, hi-vis clothing, and other appropriate protection is required."
                    },
                    {
                        id: 2,
                        type: "multiple_choice",
                        question: "When checking engine oil, what should you always wear?",
                        options: [
                            "Safety glasses",
                            "Gloves",
                            "Both A and B",
                            "No special protection needed"
                        ],
                        correct: 2,
                        explanation: "Always wear gloves when checking engine oil to prevent skin disease and contamination."
                    },
                    {
                        id: 3,
                        type: "open_ended",
                        question: "List five items you should check during pre-operational inspection.",
                        correctAnswers: [
                            "Engine cover secured",
                            "Parking brake on",
                            "Controls neutralised",
                            "Seat adjustment",
                            "Steering column",
                            "Seatbelt",
                            "Foot brake pressure",
                            "Mirrors clean",
                            "Tyres condition",
                            "Fluid levels"
                        ],
                        explanation: "Pre-operational checks include safety systems, controls, seating, visibility aids, and fluid levels."
                    },
                    {
                        id: 4,
                        type: "multiple_choice",
                        question: "Why should you fill up fuel at the end of your shift?",
                        options: [
                            "To save time next day",
                            "To prevent condensation in tank",
                            "To keep fuel fresh",
                            "To avoid fuel theft"
                        ],
                        correct: 1,
                        explanation: "Filling up at the end of shift prevents condensation building up in the fuel tank."
                    },
                    {
                        id: 5,
                        type: "open_ended",
                        question: "What are the safety requirements for getting on and off the machine?",
                        correctAnswers: [
                            "Maintain 3 points of contact",
                            "Keep steps clean",
                            "Clear handrails",
                            "Use proper technique",
                            "Check for debris"
                        ],
                        explanation: "Always maintain 3 points of contact and ensure steps and handrails are clean and clear."
                    }
                ]
            },
            4: {
                title: "Module 4: Machine Operation",
                timeLimit: 25,
                questions: [
                    {
                        id: 1,
                        type: "multiple_choice",
                        question: "What is the minimum age requirement for operating a dumper exceeding 7.5T on public highways?",
                        options: [
                            "18 years old",
                            "21 years old",
                            "25 years old",
                            "No age restriction"
                        ],
                        correct: 1,
                        explanation: "21 years old for vehicles exceeding 7.5T (MAM - Maximum Authorised Mass)."
                    },
                    {
                        id: 2,
                        type: "multiple_choice",
                        question: "What should you always ensure when operating a rotating seat dumper?",
                        options: [
                            "Seat is locked in position",
                            "Console is properly aligned",
                            "Both A and B",
                            "Neither A nor B"
                        ],
                        correct: 2,
                        explanation: "Both the seat and console must be properly positioned and locked for safe operation."
                    },
                    {
                        id: 3,
                        type: "open_ended",
                        question: "List three visibility aids that should be checked before operating an FTD.",
                        correctAnswers: [
                            "Mirrors",
                            "Cameras",
                            "Clean windows",
                            "Proper positioning",
                            "Unobstructed view"
                        ],
                        explanation: "Visibility aids include mirrors, cameras, clean windows, and ensuring unobstructed views."
                    }
                ]
            },
            5: {
                title: "Module 5: Environmental Considerations",
                timeLimit: 20,
                questions: [
                    {
                        id: 1,
                        type: "multiple_choice",
                        question: "What are the three main types of pollution associated with construction operations?",
                        options: [
                            "Air, water, and soil pollution",
                            "Air, water, and noise pollution",
                            "Water, soil, and noise pollution",
                            "Air, soil, and light pollution"
                        ],
                        correct: 1,
                        explanation: "The three main types are air pollution, water pollution, and noise pollution."
                    },
                    {
                        id: 2,
                        type: "open_ended",
                        question: "What should be considered when handling different types of materials with an FTD?",
                        correctAnswers: [
                            "Material density",
                            "Spill potential",
                            "Tipping requirements",
                            "Load distribution",
                            "Safety precautions"
                        ],
                        explanation: "Consider material density, spill potential, tipping requirements, load distribution, and safety precautions."
                    }
                ]
            },
            6: {
                title: "Module 6: Assessment & Certification",
                timeLimit: 30,
                questions: [
                    {
                        id: 1,
                        type: "multiple_choice",
                        question: "What is the minimum clearance required for an exclusion zone when loading a machine onto a transporter?",
                        options: [
                            "Half the machine height",
                            "At least the height of the highest point of the machine",
                            "Twice the machine height",
                            "No clearance required"
                        ],
                        correct: 1,
                        explanation: "At least the height of the highest point of the machine is required for safe loading."
                    },
                    {
                        id: 2,
                        type: "open_ended",
                        question: "What checks should be performed before loading a machine onto a transporter?",
                        correctAnswers: [
                            "Ground support",
                            "Ramp condition",
                            "Overhead hazards",
                            "Positioning on trailer",
                            "Direction of travel"
                        ],
                        explanation: "Check ground support, ramp condition, overhead hazards, positioning, and direction of travel."
                    }
                ]
            }
        };

        // Test functions
        function startModuleTest(moduleId) {
            if (!testData[moduleId]) {
                alert('Test not available for this module yet.');
                return;
            }

            currentTest = {
                moduleId: moduleId,
                data: testData[moduleId],
                currentQuestion: 0,
                answers: [],
                startTime: new Date()
            };

            document.getElementById('testTitle').textContent = currentTest.data.title;
            document.getElementById('testModal').classList.remove('hidden');
            
            startTestTimer();
            showTestQuestion();
        }

        function previewModuleTest(moduleId) {
            if (!testData[moduleId]) {
                alert('Test not available for this module yet.');
                return;
            }

            const test = testData[moduleId];
            const preview = `
                <div class="space-y-4">
                    <h3 class="text-lg font-semibold text-gray-900">${test.title}</h3>
                    <div class="grid grid-cols-2 gap-4 text-sm">
                        <div>
                            <span class="font-medium">Questions:</span> ${test.questions.length}
                        </div>
                        <div>
                            <span class="font-medium">Time Limit:</span> ${test.timeLimit} minutes
                        </div>
                    </div>
                    <div class="space-y-2">
                        <h4 class="font-medium text-gray-900">Sample Questions:</h4>
                        ${test.questions.slice(0, 3).map((q, i) => `
                            <div class="p-3 bg-gray-50 rounded">
                                <p class="text-sm font-medium">${i + 1}. ${q.question}</p>
                                <p class="text-xs text-gray-600 mt-1">Type: ${q.type === 'multiple_choice' ? 'Multiple Choice' : 'Open Ended'}</p>
                            </div>
                        `).join('')}
                    </div>
                    <div class="flex space-x-3 mt-6">
                        <button onclick="startModuleTest(${moduleId})" class="btn btn-primary">Start Test</button>
                        <button onclick="closeTest()" class="btn btn-secondary">Close</button>
                    </div>
                </div>
            `;

            document.getElementById('testTitle').textContent = `${test.title} - Preview`;
            document.getElementById('testContent').innerHTML = preview;
            document.getElementById('testModal').classList.remove('hidden');
        }

        function startTestTimer() {
            const timeLimit = currentTest.data.timeLimit * 60; // Convert to seconds
            let timeLeft = timeLimit;
            
            testTimer = setInterval(() => {
                timeLeft--;
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                document.getElementById('testTimer').textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                if (timeLeft <= 0) {
                    submitTest();
                }
            }, 1000);
        }

        function showTestQuestion() {
            const question = currentTest.data.questions[currentTest.currentQuestion];
            const questionNum = currentTest.currentQuestion + 1;
            const totalQuestions = currentTest.data.questions.length;
            
            document.getElementById('testGlossary').textContent = `Question ${questionNum} of ${totalQuestions}`;
            
            let questionHTML = `
                <div class="space-y-6">
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h3 class="text-lg font-semibold text-blue-900 mb-2">Question ${questionNum}</h3>
                        <p class="text-blue-800">${question.question}</p>
                    </div>
            `;

            if (question.type === 'multiple_choice') {
                questionHTML += `
                    <div class="space-y-3">
                        ${question.options.map((option, index) => `
                            <label class="flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer">
                                <input type="radio" name="answer" value="${index}" class="text-primary-600 focus:ring-primary-500">
                                <span class="text-gray-700">${option}</span>
                            </label>
                        `).join('')}
                    </div>
                `;
            } else if (question.type === 'open_ended') {
                questionHTML += `
                    <div class="space-y-3">
                        <textarea id="openAnswer" rows="4" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent" 
                                placeholder="Enter your answer here..."></textarea>
                        <p class="text-sm text-gray-600">Provide a detailed answer. The system will evaluate your response.</p>
                    </div>
                `;
            }

            questionHTML += `
                    <div class="flex justify-between pt-6">
                        <button onclick="previousQuestion()" class="btn btn-secondary" ${currentTest.currentQuestion === 0 ? 'disabled' : ''}>
                            Previous
                        </button>
                        <div class="flex space-x-3">
                            ${currentTest.currentQuestion === totalQuestions - 1 ? 
                                '<button onclick="submitTest()" class="btn btn-success">Submit Test</button>' :
                                '<button onclick="nextQuestion()" class="btn btn-primary">Next Question</button>'
                            }
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('testContent').innerHTML = questionHTML;
        }

        function nextQuestion() {
            saveCurrentAnswer();
            if (currentTest.currentQuestion < currentTest.data.questions.length - 1) {
                currentTest.currentQuestion++;
                showTestQuestion();
            }
        }

        function previousQuestion() {
            if (currentTest.currentQuestion > 0) {
                currentTest.currentQuestion--;
                showTestQuestion();
            }
        }

        function saveCurrentAnswer() {
            const question = currentTest.data.questions[currentTest.currentQuestion];
            let answer = null;

            if (question.type === 'multiple_choice') {
                const selected = document.querySelector('input[name="answer"]:checked');
                answer = selected ? parseInt(selected.value) : null;
            } else if (question.type === 'open_ended') {
                answer = document.getElementById('openAnswer').value.trim();
            }

            currentTest.answers[currentTest.currentQuestion] = answer;
        }

        function submitTest() {
            clearInterval(testTimer);
            saveCurrentAnswer();
            
            // Calculate score
            let score = 0;
            let totalQuestions = currentTest.data.questions.length;
            
            currentTest.data.questions.forEach((question, index) => {
                const userAnswer = currentTest.answers[index];
                
                if (question.type === 'multiple_choice') {
                    if (userAnswer === question.correct) {
                        score++;
                    }
                } else if (question.type === 'open_ended') {
                    // For demo purposes, we'll use a simple keyword matching
                    // In a real implementation, this would use OpenAI API
                    if (userAnswer && userAnswer.length > 10) {
                        score += 0.5; // Partial credit for attempting
                        // Check for key terms
                        const lowerAnswer = userAnswer.toLowerCase();
                        const keyTerms = question.correctAnswers.map(term => term.toLowerCase());
                        const foundTerms = keyTerms.filter(term => lowerAnswer.includes(term));
                        if (foundTerms.length > 0) {
                            score += 0.5; // Full credit for relevant answer
                        }
                    }
                }
            });

            const percentage = Math.round((score / totalQuestions) * 100);
            const passed = percentage >= 80; // 80% pass rate

            showTestResults(score, totalQuestions, percentage, passed);
        }

        function showTestResults(score, total, percentage, passed) {
            const resultsHTML = `
                <div class="text-center space-y-6">
                    <div class="w-20 h-20 mx-auto rounded-full flex items-center justify-center ${passed ? 'bg-success-100' : 'bg-danger-100'}">
                        <svg class="w-10 h-10 ${passed ? 'text-success-600' : 'text-danger-600'}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            ${passed ? 
                                '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>' :
                                '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>'
                            }
                        </svg>
                    </div>
                    
                    <div>
                        <h3 class="text-2xl font-bold ${passed ? 'text-success-600' : 'text-danger-600'}">
                            ${passed ? 'Congratulations!' : 'Test Failed'}
                        </h3>
                        <p class="text-gray-600 mt-2">
                            ${passed ? 'You have passed the test!' : 'You need to score 80% or higher to pass.'}
                        </p>
                    </div>
                    
                    <div class="bg-gray-50 p-6 rounded-lg">
                        <div class="grid grid-cols-3 gap-4 text-center">
                            <div>
                                <div class="text-2xl font-bold text-gray-900">${score}</div>
                                <div class="text-sm text-gray-600">Correct</div>
                            </div>
                            <div>
                                <div class="text-2xl font-bold text-gray-900">${total}</div>
                                <div class="text-sm text-gray-600">Total</div>
                            </div>
                            <div>
                                <div class="text-2xl font-bold ${passed ? 'text-success-600' : 'text-danger-600'}">${percentage}%</div>
                                <div class="text-sm text-gray-600">Score</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex space-x-3 justify-center">
                        <button onclick="closeTest()" class="btn btn-primary">Close</button>
                        ${!passed ? '<button onclick="retakeTest()" class="btn btn-secondary">Retake Test</button>' : ''}
                    </div>
                </div>
            `;

            document.getElementById('testContent').innerHTML = resultsHTML;
        }

        function retakeTest() {
            startModuleTest(currentTest.moduleId);
        }

        function closeTest() {
            if (testTimer) {
                clearInterval(testTimer);
            }
            document.getElementById('testModal').classList.add('hidden');
            currentTest = null;
        }

        function startNewTest() {
            // Show module selection
            const moduleSelection = `
                <div class="space-y-4">
                    <h3 class="text-lg font-semibold text-gray-900">Select Module to Test</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        ${Object.entries(testData).map(([id, test]) => `
                            <button onclick="startModuleTest(${id})" class="p-4 border border-gray-200 rounded-lg hover:bg-gray-50 text-left">
                                <h4 class="font-medium text-gray-900">${test.title}</h4>
                                <p class="text-sm text-gray-600">${test.questions.length} questions • ${test.timeLimit} minutes</p>
                            </button>
                        `).join('')}
                    </div>
                    <div class="flex justify-end">
                        <button onclick="closeTest()" class="btn btn-secondary">Cancel</button>
                    </div>
                </div>
            `;

            document.getElementById('testTitle').textContent = 'Start New Test';
            document.getElementById('testContent').innerHTML = moduleSelection;
            document.getElementById('testModal').classList.remove('hidden');
        }

        function viewTestResults() {
            // Show test history/results
            const resultsHTML = `
                <div class="space-y-4">
                    <h3 class="text-lg font-semibold text-gray-900">Test Results</h3>
                    <div class="text-center py-8 text-gray-500">
                        <svg class="w-12 h-12 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                        </svg>
                        <p>No test results available yet.</p>
                        <p class="text-sm">Complete a test to see your results here.</p>
                    </div>
                    <div class="flex justify-end">
                        <button onclick="closeTest()" class="btn btn-secondary">Close</button>
                    </div>
                </div>
            `;

            document.getElementById('testTitle').textContent = 'Test Results';
            document.getElementById('testContent').innerHTML = resultsHTML;
            document.getElementById('testModal').classList.remove('hidden');
        }

        function startQuiz(quizId) {
            alert(`Starting Quiz ${quizId}. This would open the interactive quiz.`);
        }


        // Glossary tracking
        function updateUserGuide() {
            const completed = Object.values(progress.moduleStatus).filter(status => status === 'completed').length;
            const total = Object.keys(progress.moduleStatus).length;
            const percentage = Math.round((completed / total) * 100);
            
            document.getElementById('overall-progress').textContent = percentage + '%';
            document.getElementById('progress-fill').style.width = percentage + '%';
            document.getElementById('modules-completed').textContent = total;
            document.getElementById('quizzes-completed').textContent = completed;
            
            // Update time spent display
            const timeSpentEl = document.querySelector('[id*="time-spent"]');
            if (timeSpentEl) {
                const hours = Math.floor(progress.timeSpent / 60);
                const minutes = progress.timeSpent % 60;
                timeSpentEl.textContent = hours > 0 ? `${hours}h ${minutes}m` : `${minutes}m`;
            }
            
            // Update module statuses
            Object.keys(progress.moduleStatus).forEach(moduleId => {
                const statusEl = document.querySelector(`[data-module="${moduleId}"] .module-status`);
                if (statusEl) {
                    const status = progress.moduleStatus[moduleId];
                    statusEl.textContent = status === 'completed' ? 'Complete' : 
                                         status === 'in-progress' ? 'In Glossary' : 
                                         status === 'locked' ? 'Locked' : 'Not Started';
                    statusEl.className = `module-status text-sm ${
                        status === 'completed' ? 'text-success-600' : 
                        status === 'in-progress' ? 'text-warning-600' : 
                        status === 'locked' ? 'text-gray-400' : 'text-gray-500'
                    }`;
                }
            });
        }

        // PDF Functions
        function viewPDF(pdfPath) {
            // Try to open PDF in new tab
            const pdfWindow = window.open(pdfPath, '_blank');
            
            if (!pdfWindow) {
                // Fallback: Show message if PDF not found
                alert(`PDF file not found: ${pdfPath}. Please ensure the file is in the project directory.`);
            }
        }

        function downloadPDF(pdfPath, downloadName) {
            // Create download link
            const link = document.createElement('a');
            link.href = pdfPath;
            link.download = downloadName || 'Forward-Tipping-Dumper-Document.pdf';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // Glossary search
        function searchGlossary() {
            const searchTerm = document.getElementById('glossary-search').value.toLowerCase();
            const terms = document.querySelectorAll('#glossary-terms .card');
            
            terms.forEach(term => {
                const text = term.textContent.toLowerCase();
                if (text.includes(searchTerm)) {
                    term.style.display = 'block';
                } else {
                    term.style.display = 'none';
                }
            });
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Prevent infinite redirects
            if (sessionStorage.getItem('redirecting')) {
                console.log('Already redirecting, stopping');
                return;
            }
            
            // Check if we're on mobile and bypass auth for testing
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            const bypassAuth = sessionStorage.getItem('bypassAuth') === 'true';
            
            if (isMobile && !bypassAuth) {
                console.log('Mobile device detected, bypassing authentication for testing');
                sessionStorage.setItem('bypassAuth', 'true');
                // Set default user for mobile
                if (!localStorage.getItem('isAuthenticated')) {
                    localStorage.setItem('isAuthenticated', 'true');
                    localStorage.setItem('userEmail', 'mobile@test.com');
                }
            }
            
            // Check authentication first
            if (!checkAuthentication()) {
                sessionStorage.setItem('redirecting', 'true');
                return;
            }
            
            // Clear redirect flag if we get here
            sessionStorage.removeItem('redirecting');
            
            // Initialize lazy loading
            initializeLazyLoading();
            
            updateUserGuide();
            showTab('home');
        });
        
        // Lazy loading initialization
        function initializeLazyLoading() {
            const images = document.querySelectorAll('img[loading="lazy"]');
            
            if ('IntersectionObserver' in window) {
                const imageObserver = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const img = entry.target;
                            img.addEventListener('load', () => {
                                img.classList.add('loaded');
                            });
                            observer.unobserve(img);
                        }
                    });
                });
                
                images.forEach(img => imageObserver.observe(img));
            } else {
                // Fallback for browsers without IntersectionObserver
                images.forEach(img => {
                    img.addEventListener('load', () => {
                        img.classList.add('loaded');
                    });
                });
            }
        }
    </script>
    
    <!-- Glossary Search Functionality -->
    <script>
        // Glossary search functionality
        document.addEventListener('DOMContentLoaded', function() {
            const searchInput = document.getElementById('glossarySearch');
            const glossaryTerms = document.getElementById('glossaryTerms');
            
            if (searchInput && glossaryTerms) {
                searchInput.addEventListener('input', function() {
                    const searchTerm = this.value.toLowerCase();
                    const cards = glossaryTerms.querySelectorAll('.card');
                    
                    cards.forEach(card => {
                        const title = card.querySelector('h3').textContent.toLowerCase();
                        const description = card.querySelector('p').textContent.toLowerCase();
                        
                        if (title.includes(searchTerm) || description.includes(searchTerm)) {
                            card.style.display = 'block';
                        } else {
                            card.style.display = 'none';
                        }
                    });
                });
            }
        });
    </script>
</body>
</html>
